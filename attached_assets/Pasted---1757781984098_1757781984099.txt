Привет. Мы успешно развернули сайт на внешнем сервере. Перед тем, как начать его активное наполнение, мне необходим полный и исчерпывающий технический аудит каждого раздела админ-панели. Мне нужно понять всю архитектуру данных и все взаимосвязи между ними.
Задача: Пожалуйста, выполни следующие шаги:
Шаг 1: Полная инвентаризация сущностей.
Сначала проанализируй админ-панель и схему данных (prisma/schema.prisma) и предоставь полный список ВСЕХ управляемых сущностей. Например: Тур, Отель, Гид, Водитель, Трансфер, Заказ, Компонент Цены, Категория Тура и т.д. Перечисли их все списком.
Шаг 2: Детальный отчет по КАЖДОЙ сущности.
Для КАЖДОЙ сущности из списка, который ты составил в Шаге 1, предоставь подробный отчет по следующей структуре:
Название Сущности: (например, "Отель")
Назначение: Краткое описание, для чего эта сущность нужна в системе.
Таблицы в Базе Данных: Перечисли основную и все связанные таблицы из prisma/schema.prisma, которые используются для хранения данных этой сущности.
Ключевые Поля: Укажи 3-5 самых важных полей в таблице и их назначение (например, name - название отеля, address - адрес, mainImageId - ID главной картинки).
Взаимосвязи: С какими другими сущностями она связана? Опиши эту связь (например, "Отель связан с Туром через таблицу TourHotelAssignment. Один тур может иметь много отелей, и один отель может быть во многих турах").
API Эндпоинты: Перечисли основные API-маршруты, которые используются для создания (POST), чтения (GET), обновления (PUT/PATCH) и удаления (DELETE) этой сущности.
Файлы на Бэкенде: Укажи путь к основному файлу-контроллеру (например, src/controllers/hotelController.ts) и файлу-роутеру (например, src/routes/hotelRoutes.ts), которые отвечают за логику этой сущности.
Шаг 3: Аудит ключевых бизнес-процессов.
В дополнение к отчету по сущностям, дай детальное объяснение следующих сквозных процессов:
Процесс Ценообразования Тура:
Как именно работает "Калькулятор цен"?
Как "Компоненты цен" создаются и где хранятся?
Как они привязываются к "Туру" и влияют на его итоговую стоимость?
Какой код отвечает за этот расчет?
Процесс Бронирования (Создание "Заказа"):
Какие данные собираются с пользователя при бронировании?
Как создается сущность "Заказ"?
С какими другими сущностями (Тур, Клиент, Отель) связывается "Заказ" в момент создания?
Как в системе обрабатываются статусы заказа (например, "Новый", "Подтвержден", "Оплачен")?
Процесс Отображения на Сайте:
Объясни, как данные из нескольких сущностей (например, Тур, его Отели, его Гиды) собираются вместе на бэкенде, чтобы быть отображенными на одной странице (tour-template.html).
Какой контроллер или сервис отвечает за эту "сборку" данных перед отправкой на фронтенд?
Финальный вопрос: Есть ли в системе какие-либо "глобальные" настройки или сущности в админ-панели, которые влияют на работу всего сайта (например, курсы валют, общие настройки и т.д.)? Если да, опиши их.