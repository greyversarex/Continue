<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bunyod-Tour - Туры по Таджикистану</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Noto Sans', 'Ubuntu', 'Cantarell', 'Helvetica Neue', sans-serif; }
    </style>
    <script src="https://cdn.tailwindcss.com"></script>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="replit-cache-buster" content="DARK-FILTER-1754862000">
    <script>
        // Очистка кеша для Replit Preview
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.getRegistrations().then(function(registrations) {
                for(let registration of registrations) {
                    registration.unregister();
                }
            });
        }
        
        // Принудительное обновление для встроенного preview Replit
        const replitVersion = 'DARK-FILTER-v3-' + Date.now();
        if (localStorage.getItem('replitPreviewVersion') !== replitVersion) {
            localStorage.setItem('replitPreviewVersion', replitVersion);
            // Добавляем уникальный параметр для Replit preview
            if (!window.location.search.includes('repl_preview=')) {
                const separator = window.location.search ? '&' : '?';
                window.location.href = window.location.pathname + window.location.search + separator + 'repl_preview=' + Date.now();
            }
        }
    </script>
    <style>
        .banner-height {
            height: 70vh;
        }
        .gradient-overlay {
            background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.6));
        }
        .hero-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }
        .filter-gradient {
            background: linear-gradient(135deg, #4A4A4A 0%, #3E3E3E 50%, #2F2F2F 100%);
            box-shadow: 0 10px 30px rgba(47, 47, 47, 0.4);
        }
        .modern-select {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255,255,255,0.2);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        .modern-select:focus {
            border-color: #667eea;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.3);
            transform: translateY(-2px);
        }
        .modern-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
            transition: all 0.3s ease;
        }
        .modern-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(102, 126, 234, 0.6);
        }
        .service-card {
            background: linear-gradient(145deg, #ffffff, #f8fafc);
            border: 1px solid rgba(226, 232, 240, 0.5);
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }
        .service-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.1), transparent);
            transition: left 0.6s ease;
        }
        .service-card:hover::before {
            left: 100%;
        }
        .service-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }
        .service-icon {
            background: linear-gradient(135deg, var(--icon-color-1), var(--icon-color-2));
            box-shadow: 0 8px 20px var(--icon-shadow);
            transition: all 0.3s ease;
        }
        .service-card:hover .service-icon {
            transform: scale(1.1) rotate(5deg);
        }
        
        /* Tour Block Carousel Styles */
        .tour-block-container {
            position: relative;
        }
        
        .tour-carousel {
            display: flex;
            overflow-x: auto;
            scroll-behavior: smooth;
            gap: 1.5rem;
            padding: 0 60px;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }
        
        .tour-carousel::-webkit-scrollbar {
            display: none;
        }
        
        /* Hero Slider Styles */
        .hero-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0;
            transition: opacity 1s ease-in-out;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .hero-slide.active {
            opacity: 1;
        }
        
        .slider-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .slider-dot.active {
            background-color: white;
            transform: scale(1.2);
        }
        
        .slider-dot:hover {
            background-color: rgba(255, 255, 255, 0.8);
        }
        
        .tour-card {
            min-width: 280px;
            max-width: 280px;
            flex-shrink: 0;
        }
        
        .carousel-button {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.95);
            border: none;
            border-radius: 50%;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
            z-index: 10;
            backdrop-filter: blur(10px);
        }
        
        .carousel-button:hover {
            background: rgba(255, 255, 255, 1);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
            transform: translateY(-50%) scale(1.05);
        }
        
        .carousel-button:active {
            transform: translateY(-50%) scale(0.95);
        }
        
        .carousel-button.prev {
            left: 10px;
        }
        
        .carousel-button.next {
            right: 10px;
        }
        
        .carousel-button svg {
            width: 24px;
            height: 24px;
            color: #3e3e3e;
        }
        
        .carousel-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: translateY(-50%) scale(0.9);
        }
        
        @media (max-width: 768px) {
            .tour-carousel {
                padding: 0 20px;
            }
            
            .carousel-button {
                width: 40px;
                height: 40px;
            }
            
            .carousel-button svg {
                width: 20px;
                height: 20px;
            }
        }
        
        /* Анимированные иконки услуг */
        .car-icon, .guide-icon, .agency-icon, .class-icon {
            font-size: 3rem;
            transition: all 0.4s ease;
            display: inline-block;
            color: #3E3E3E;
        }
        
        .service-card:hover .car-icon {
            animation: drive 1.5s ease-in-out infinite alternate;
            color: #2563EB;
            filter: drop-shadow(0 4px 12px rgba(37, 99, 235, 0.4));
        }
        
        .service-card:hover .car-icon {
            color: #2563EB;
            transform: scale(1.1);
        }
        @keyframes drive {
            0% { transform: translateX(0); }
            100% { transform: translateX(15px); }
        }
        
        .service-card:hover .guide-icon {
            animation: wave 1.2s ease-in-out infinite;
            color: #059669;
            filter: drop-shadow(0 4px 12px rgba(5, 150, 105, 0.4));
            transform: scale(1.1);
        }
        @keyframes wave {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(10deg); }
            75% { transform: rotate(-10deg); }
        }
        
        .service-card:hover .agency-icon {
            animation: bounce 1s ease-in-out infinite;
            color: #DC2626;
            filter: drop-shadow(0 4px 12px rgba(220, 38, 38, 0.4));
            transform: scale(1.1);
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-8px) scale(1.1); }
        }
        
        .service-card:hover .class-icon {
            animation: rotate 2s linear infinite;
            color: #7C3AED;
            filter: drop-shadow(0 4px 12px rgba(124, 58, 237, 0.4));
            transform: scale(1.1);
        }
        @keyframes rotate {
            0% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(180deg) scale(1.2); }
            100% { transform: rotate(360deg) scale(1); }
        }
        
        /* Стили для выпадающих меню навигации */
        .dropdown {
            position: relative;
            display: inline-block;
        }
        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #2F2F2F;
            min-width: 200px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.3);
            z-index: 1000;
            border-radius: 8px;
            top: 100%;
            left: 0;
            padding: 8px 0;
        }
        .dropdown:hover .dropdown-content {
            display: block;
        }
        .dropdown-content a {
            color: white;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            transition: background-color 0.3s;
        }
        .dropdown-content a:hover {
            background-color: #4A4A4A;
        }
        .dropdown-content .dropdown-submenu {
            position: relative;
        }
        .dropdown-content .dropdown-submenu .dropdown-subcontent {
            display: none !important;
            position: absolute;
            left: 100%;
            top: 0;
            background-color: #2F2F2F;
            min-width: 180px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.3);
            border-radius: 8px;
            padding: 8px 0;
            z-index: 1001;
        }
        .dropdown-content .dropdown-submenu:hover > .dropdown-subcontent {
            display: block !important;
        }
        
        /* Стили для языкового селектора */
        .language-selector {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 6px;
            color: white;
            padding: 8px 12px;
            transition: all 0.3s ease;
        }
        .language-selector:hover {
            background: rgba(255,255,255,0.2);
        }
        
        /* Стили для поисковика */
        .search-container {
            position: relative;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        

        .search-input {
            flex: 1;
            padding: 16px 20px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 12px;
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        .search-input:focus {
            border-color: #667eea;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.3);
            transform: translateY(-2px);
            outline: none;
        }
        .filter-icon-btn {
            background: rgba(255,255,255,0.9);
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 12px;
            padding: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .filter-icon-btn:hover {
            background: white;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        /* Стили для языкового селектора с флагами */
        .language-dropdown {
            position: relative;
            display: inline-block;
        }
        
        .lang-selector-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 0.5rem;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            min-width: 80px;
        }
        
        .lang-selector-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .selected-flag {
            width: 24px;
            height: 16px;
            border-radius: 2px;
            display: inline-block;
            margin-right: 8px;
            border: 1px solid rgba(255,255,255,0.4);
            box-shadow: 0 1px 3px rgba(0,0,0,0.3);
        }
        
        .flag {
            width: 20px;
            height: 14px;
            border-radius: 2px;
            display: inline-block;
            margin-right: 8px;
            border: 1px solid rgba(255,255,255,0.3);
            box-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }
        
        /* Цвета флагов */
        .flag-ru, .selected-flag.flag-ru {
            background: linear-gradient(to bottom, 
                #ffffff 0%, #ffffff 33.33%, 
                #0039a6 33.33%, #0039a6 66.66%, 
                #d52b1e 66.66%, #d52b1e 100%);
        }
        .flag-us, .selected-flag.flag-us {
            background: linear-gradient(to bottom, 
                #b22234 0%, #b22234 7.7%, #ffffff 7.7%, #ffffff 15.4%, 
                #b22234 15.4%, #b22234 23.1%, #ffffff 23.1%, #ffffff 30.8%,
                #b22234 30.8%, #b22234 38.5%, #ffffff 38.5%, #ffffff 46.2%,
                #b22234 46.2%, #b22234 53.8%, #ffffff 53.8%, #ffffff 61.5%,
                #b22234 61.5%, #b22234 69.2%, #ffffff 69.2%, #ffffff 76.9%,
                #b22234 76.9%, #b22234 84.6%, #ffffff 84.6%, #ffffff 92.3%,
                #b22234 92.3%, #b22234 100%);
            position: relative;
        }
        .flag-us::before, .selected-flag.flag-us::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 35%;
            height: 47%;
            background: #3c3b6e;
            border-radius: 1px;
        }
        .flag-tj, .selected-flag.flag-tj {
            background: linear-gradient(to bottom, 
                #ce1126 0%, #ce1126 33.33%, 
                #ffffff 33.33%, #ffffff 66.66%, 
                #00945a 66.66%, #00945a 100%);
        }
        .flag-ir, .selected-flag.flag-ir {
            background: linear-gradient(to bottom, 
                #239f40 0%, #239f40 33.33%, 
                #ffffff 33.33%, #ffffff 66.66%, 
                #da0000 66.66%, #da0000 100%);
        }
        .flag-de, .selected-flag.flag-de {
            background: linear-gradient(to bottom, 
                #000000 0%, #000000 33.33%, 
                #dd0000 33.33%, #dd0000 66.66%, 
                #ffce00 66.66%, #ffce00 100%);
        }
        .flag-cn, .selected-flag.flag-cn {
            background: #de2910;
            position: relative;
        }
        .flag-cn::before, .selected-flag.flag-cn::before {
            content: '★';
            position: absolute;
            color: #ffde00;
            font-size: 7px;
            top: 2px;
            left: 3px;
            text-shadow: 0 0 1px rgba(0,0,0,0.3);
        }
        
        .dropdown-arrow {
            transition: transform 0.3s ease;
            margin-left: auto;
        }
        
        .dropdown-arrow.open {
            transform: rotate(180deg);
        }
        
        .lang-dropdown-content {
            display: none;
            position: absolute;
            top: 100%;
            right: 0;
            background: rgba(47, 47, 47, 0.95);
            backdrop-filter: blur(10px);
            min-width: 160px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 0.75rem;
            z-index: 1000;
            overflow: hidden;
            margin-top: 0.5rem;
        }
        
        .lang-dropdown-content.show {
            display: block;
            animation: slideDown 0.3s ease;
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .lang-option {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            color: white;
            text-decoration: none;
            transition: all 0.3s ease;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .lang-option:last-child {
            border-bottom: none;
        }
        
        .lang-option:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
        }
        
        .lang-option.active {
            background: rgba(255, 255, 255, 0.15);
            color: #ffffff;
        }
        
        .lang-option .flag {
            font-size: 1.25rem;
            flex-shrink: 0;
        }
        
        .lang-option .lang-name {
            font-weight: 500;
            flex: 1;
        }
        
        /* Система поиска с выдвижными фильтрами */
        .search-filter-container {
            margin-bottom: 2rem;
        }
        
        .search-section {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
            background: #3E3E3E;
            padding: 1rem;
            border-radius: 16px;
            box-shadow: 0 8px 25px rgba(62, 62, 62, 0.3);
        }
        
        .search-input-compact {
            flex: 1;
            padding: 1rem 1.5rem;
            border: none;
            border-radius: 12px;
            background: white;
            color: #374151;
            font-size: 1rem;
            outline: none;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .search-input-compact::placeholder {
            color: #9CA3AF;
        }
        
        .search-input-compact:focus {
            background: white;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
            transform: translateY(-1px);
        }
        
        .filter-toggle-btn {
            padding: 1rem 1.5rem;
            border: none;
            border-radius: 12px;
            background: white;
            color: #374151;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            white-space: nowrap;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .filter-toggle-btn:hover {
            background: #F8F9FA;
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        }
        
        .search-btn-compact {
            padding: 1rem 1.5rem;
            border: none;
            border-radius: 12px;
            background: #6B7280;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            white-space: nowrap;
            box-shadow: 0 2px 8px rgba(107, 114, 128, 0.3);
        }
        
        .search-btn-compact:hover {
            background: #4B5563;
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(107, 114, 128, 0.4);
        }
        
        /* Панель фильтров */
        .filter-panel {
            background: #3E3E3E;
            border-radius: 16px;
            padding: 1.5rem;
            border: none;
            box-shadow: 0 8px 25px rgba(62, 62, 62, 0.3);
            transition: all 0.4s ease;
            animation: slideDown 0.4s ease;
            margin-top: 1rem;
        }
        
        .filter-panel.hidden {
            display: none;
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .filter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }
        
        .filter-select, .filter-date {
            padding: 0.875rem 1.25rem;
            border: none;
            border-radius: 12px;
            background: white;
            color: #374151;
            font-size: 0.95rem;
            outline: none;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            appearance: none;
            cursor: pointer;
        }
        
        .filter-select option {
            background: white;
            color: #374151;
        }
        
        .filter-select:focus, .filter-date:focus {
            background: white;
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        }
        
        .filter-select:hover, .filter-date:hover {
            background: #F8F9FA;
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        }
        
        /* Стрелка для select */
        .filter-select {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.75rem center;
            background-repeat: no-repeat;
            background-size: 1.5em 1.5em;
            padding-right: 3rem;
        }
        
        /* Стили для автодополнения */
        .search-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #e5e7eb;
            border-top: none;
            border-radius: 0 0 12px 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .suggestion-item {
            padding: 0.875rem 1.25rem;
            cursor: pointer;
            border-bottom: 1px solid #f3f4f6;
            transition: background-color 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        
        .suggestion-item:hover {
            background-color: #f9fafb;
        }
        
        .suggestion-item:last-child {
            border-bottom: none;
        }
        
        .suggestion-icon {
            width: 20px;
            height: 20px;
            color: #6b7280;
        }
        
        .suggestion-text {
            flex: 1;
            font-size: 0.95rem;
            color: #374151;
        }
        
        .suggestion-type {
            font-size: 0.75rem;
            color: #9ca3af;
            background: #f3f4f6;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
        }

        @media (max-width: 768px) {
            .search-section {
                flex-direction: column;
                gap: 0.75rem;
                padding: 1.25rem;
            }
            
            .search-input-compact, .filter-toggle-btn, .search-btn-compact {
                width: 100%;
                justify-content: center;
            }
            
            .filter-grid {
                grid-template-columns: 1fr;
                gap: 0.75rem;
            }
            
            .filter-panel {
                padding: 1rem;
                margin: 1rem 0;
            }
        }
    </style>
    
    <!-- Leaflet Map API -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
</head>
<body>
    <!-- Хедер -->
    <header class="shadow-md sticky top-0 z-50" style="background-color: #3E3E3E;">
        <div class="max-w-7xl mx-auto">
            <div class="flex items-center justify-between h-16 px-6">
                <!-- Логотип -->
                <div class="flex items-center">
                    <img src="Logo-Ru_1754635713718.png" alt="Bunyod-Tour Logo" class="w-12 h-12 mr-3 rounded-full">
                    <span class="text-xl font-bold text-white">Bunyod-Tour</span>
                </div>
                
                <!-- Навигационное меню -->
                <nav class="hidden md:flex space-x-6">
                    <a href="about-us.html" class="text-white hover:text-gray-300 transition-colors">О нас</a>
                    
                    <!-- Услуги (с выпадающим меню) -->
                    <div class="dropdown">
                        <a href="#" class="text-white hover:text-gray-300 transition-colors">Услуги</a>
                        <div class="dropdown-content">
                            <div class="dropdown-submenu">
                                <a href="#">Туры</a>
                                <div class="dropdown-subcontent" style="width: 400px; display: grid; grid-template-columns: 1fr 1fr; gap: 8px; padding: 12px;">
                                    <a href="#" style="padding: 8px;">Однодневные</a>
                                    <a href="#" style="padding: 8px;">Многодневные</a>
                                    <a href="#" style="padding: 8px;">Экскурсии</a>
                                    <a href="#" style="padding: 8px;">Городские туры</a>
                                    <a href="#" style="padding: 8px;">Природа/экологические туры</a>
                                    <a href="#" style="padding: 8px;">Культурно познавательные туры</a>
                                    <a href="#" style="padding: 8px;">Исторические туры</a>
                                    <a href="#" style="padding: 8px;">Походы/трекинги</a>
                                    <a href="#" style="padding: 8px;">Горные ландшафты</a>
                                    <a href="#" style="padding: 8px;">Озерные ландшафты</a>
                                    <a href="#" style="padding: 8px;">Приключенческие туры</a>
                                    <a href="#" style="padding: 8px;">Гастрономические туры</a>
                                    <a href="#" style="padding: 8px;">Автотуры/сафари/джип-туры</a>
                                    <a href="#" style="padding: 8px;">Агротуры</a>
                                    <a href="#" style="padding: 8px;">VIP туры</a>
                                    <a href="#" style="padding: 8px;"></a>
                                </div>
                            </div>
                            <a href="#">Тургиды</a>
                            <a href="/hotels-catalog.html">Отели</a>
                            <a href="#" >Трансфер</a>
                            <a href="#">Заказ тура</a>
                            <a href="visa-support.html">Визовая поддержка</a>
                        </div>
                    </div>
                    
                    <!-- Туристам (с выпадающим меню) -->
                    <div class="dropdown">
                        <a href="#" class="text-white hover:text-gray-300 transition-colors">Туристам</a>
                        <div class="dropdown-content">
                            <a href="booking-guide.html">Инструкция сайта</a>
                            <a href="#">Специальные заметки</a>
                            <a href="#">Договор оферта</a>
                            <a href="#">Правила оплаты и возврата средств</a>
                        </div>
                    </div>
                    
                    <!-- Акции (БЕЗ выпадающего меню) -->
                    <a href="aktsii.html" class="text-white hover:text-gray-300 transition-colors">Акции</a>
                    <a href="news.html" class="text-white hover:text-gray-300 transition-colors">Новости</a>
                    
                    <!-- Тур-агенты (с выпадающим меню) -->
                    <div class="dropdown">
                        <a href="#" class="text-white hover:text-gray-300 transition-colors">Тур-агенты</a>
                        <div class="dropdown-content">
                            <a href="our-tour-agents.html">Наши турагенты</a>
                            <a href="tour-agents.html">Для турагентов</a>
                        </div>
                    </div>
                </nav>
                
                <!-- Языковой и валютный селекторы -->
                <div class="flex items-center space-x-4">
                    <!-- Языковой селектор -->
                    <div class="language-dropdown">
                        <button class="lang-selector-btn" onclick="toggleLanguageDropdown()">
                            <span class="selected-flag flag-ru"></span>
                            <span class="selected-lang">Русский</span>
                            <svg class="dropdown-arrow" width="12" height="12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                            </svg>
                        </button>
                        <div class="lang-dropdown-content" id="langDropdown">
                            <a href="#" class="lang-option active" data-lang="ru" onclick="selectLanguage('ru', 'flag-ru', 'Русский')">
                                <span class="flag flag-ru"></span>
                                <span class="lang-name">Русский</span>
                            </a>
                            <a href="#" class="lang-option" data-lang="en" onclick="selectLanguage('en', 'flag-us', 'English')">
                                <span class="flag flag-us"></span>
                                <span class="lang-name">English</span>
                            </a>
                            <a href="#" class="lang-option" data-lang="tj" onclick="selectLanguage('tj', 'flag-tj', 'Тоҷикӣ')">
                                <span class="flag flag-tj"></span>
                                <span class="lang-name">Тоҷикӣ</span>
                            </a>
                            <a href="#" class="lang-option" data-lang="fa" onclick="selectLanguage('fa', 'flag-ir', 'فارسی')">
                                <span class="flag flag-ir"></span>
                                <span class="lang-name">فارسی</span>
                            </a>
                            <a href="#" class="lang-option" data-lang="de" onclick="selectLanguage('de', 'flag-de', 'Deutsch')">
                                <span class="flag flag-de"></span>
                                <span class="lang-name">Deutsch</span>
                            </a>
                            <a href="#" class="lang-option" data-lang="zh" onclick="selectLanguage('zh', 'flag-cn', '中文')">
                                <span class="flag flag-cn"></span>
                                <span class="lang-name">中文</span>
                            </a>
                        </div>
                    </div>

                    <!-- Валютный селектор -->
                    <div class="language-dropdown">
                        <button class="lang-selector-btn" onclick="toggleCurrencyDropdown()">
                            <span class="selected-currency">TJS</span>
                            <svg class="dropdown-arrow" width="12" height="12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                            </svg>
                        </button>
                        <div class="lang-dropdown-content" id="currencyDropdown">
                            <a href="#" class="lang-option active" data-currency="TJS" onclick="selectCurrency('TJS', 'TJS')">
                                <span class="currency-name">TJS</span>
                            </a>
                            <a href="#" class="lang-option" data-currency="USD" onclick="selectCurrency('USD', 'USD')">
                                <span class="currency-name">USD</span>
                            </a>
                            <a href="#" class="lang-option" data-currency="EUR" onclick="selectCurrency('EUR', 'EUR')">
                                <span class="currency-name">EUR</span>
                            </a>
                            <a href="#" class="lang-option" data-currency="RUB" onclick="selectCurrency('RUB', 'RUB')">
                                <span class="currency-name">RUB</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Главный баннер/слайдер -->
    <section id="heroSlider" class="banner-height relative overflow-hidden">
        <!-- Слайды будут загружены динамически -->
        <div id="slidesContainer" class="h-full w-full">
            <!-- Загрузочный плейсхолдер -->
            <div class="hero-bg banner-height relative flex items-center justify-center text-white">
                <div class="gradient-overlay absolute inset-0"></div>
                <div class="relative z-10 text-center max-w-4xl mx-auto px-6">
                    <h1 class="text-6xl font-bold mb-6">
                        Откройте красоту Таджикистана
                    </h1>
                    <p class="text-xl mb-8 max-w-2xl mx-auto">
                        Исследуйте захватывающие горы Памира, древние города Шёлкового пути и богатую культуру этой удивительной страны
                    </p>
                </div>
            </div>
        </div>
        
        <!-- Навигация слайдера -->
        <div id="sliderNavigation" class="absolute bottom-20 left-1/2 transform -translate-x-1/2 flex space-x-2">
            <!-- Точки будут добавлены динамически -->
        </div>
        
        <!-- Стрелки навигации -->
        <button id="prevSlide" class="absolute left-4 top-1/2 transform -translate-y-1/2 text-white text-3xl opacity-70 hover:opacity-100 transition-opacity duration-300 z-10" style="display: none;">
            &#8249;
        </button>
        <button id="nextSlide" class="absolute right-4 top-1/2 transform -translate-y-1/2 text-white text-3xl opacity-70 hover:opacity-100 transition-opacity duration-300 z-10" style="display: none;">
            &#8250;
        </button>
        
        <!-- Брендинг -->
        <div class="absolute bottom-8 right-8">
            <div class="bg-black bg-opacity-50 text-white px-4 py-2 rounded-lg text-sm">
                Больше с Bunyod-Tour
            </div>
        </div>
    </section>

    <!-- Система фильтров туров -->
    <section class="py-16 bg-white">
        <div class="max-w-7xl mx-auto px-6">
            <h2 class="text-3xl font-bold text-center mb-12 text-gray-900">
                Найдите идеальный тур
            </h2>
            
            <!-- Компактный поисковик с фильтрами -->
                <div class="search-filter-container">
                    <!-- Поисковая строка с кнопкой фильтра -->
                    <div class="search-section">
                        <div class="search-autocomplete-container" style="position: relative; flex: 1; width: 100%;">
                            <input type="text" id="searchInput" class="search-input-compact" placeholder="Найдите идеальный тур: Памир, Искандеркуль, треккинг..." 
                                   onkeypress="if(event.key==='Enter') performSearch()" 
                                   oninput="handleSearchInput(this.value)" 
                                   onfocus="showSuggestions()" 
                                   onblur="hideSuggestions()"
                                   style="width: 100%;">
                            <div id="searchSuggestions" class="search-suggestions hidden"></div>
                        </div>
                        
                        <button onclick="toggleFilterPanel()" class="filter-toggle-btn">
                            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"/>
                            </svg>
                            Фильтры
                        </button>
                        
                        <button onclick="performSearch()" class="search-btn-compact">
                            <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                            </svg>
                            Найти
                        </button>
                    </div>
                    
                    <!-- Панель фильтров (скрыта по умолчанию) -->
                    <div id="filterPanel" class="filter-panel hidden">
                        <div class="filter-grid">
                            <select id="countryFilter" class="filter-select" onchange="updateCities(); updateHotels()"
                                <option value="">Страна</option>
                                <option value="Таджикистан">Таджикистан</option>
                                <option value="Узбекистан">Узбекистан</option>
                                <option value="Кыргызстан">Кыргызстан</option>
                                <option value="Казахстан">Казахстан</option>
                                <option value="Туркменистан">Туркменистан</option>
                            </select>
                            
                            <select id="cityFilter" class="filter-select">
                                <option value="">Город</option>
                            </select>
                            
                            <select id="formatFilter" class="filter-select">
                                <option value="">Вид тура</option>
                                <option value="Персональный">Персональный</option>
                                <option value="Групповой персональный">Групповой персональный</option>
                                <option value="Групповой общий">Групповой общий</option>
                                <option value="VIP">VIP</option>
                            </select>
                            
                            <select id="categoryFilter" class="filter-select">
                                <option value="">Категория</option>
                                <option value="Однодневные">Однодневные</option>
                                <option value="Многодневные">Многодневные</option>
                                <option value="Экскурсии">Экскурсии</option>
                                <option value="Городские туры">Городские туры</option>
                                <option value="Природа, экологические туры">Природа, экологические туры</option>
                                <option value="Культурно познавательные туры">Культурно познавательные туры</option>
                                <option value="Исторические туры">Исторические туры</option>
                                <option value="Походы, трекинги">Походы, трекинги</option>
                                <option value="Горные ландшафты">Горные ландшафты</option>
                                <option value="Озерные ландшафты">Озерные ландшафты</option>
                                <option value="Приключенческие туры">Приключенческие туры</option>
                                <option value="Гастрономические туры">Гастрономические туры</option>
                                <option value="Автотуры, сафари, джип-туры">Автотуры, сафари, джип-туры</option>
                                <option value="Агротуры">Агротуры</option>
                                <option value="VIP туры">VIP туры</option>
                            </select>
                            
                            <!-- Hotel Brand Filter -->
                            <select id="hotelBrandFilter" class="filter-select" onchange="updateHotelFilters()">
                                <option value="">Бренд отеля</option>
                                <optgroup label="Люкс сегмент">
                                    <option value="Four Seasons">Four Seasons</option>
                                    <option value="Ritz-Carlton">Ritz-Carlton</option>
                                    <option value="W Hotels">W Hotels</option>
                                    <option value="St. Regis">St. Regis</option>
                                    <option value="Waldorf Astoria">Waldorf Astoria</option>
                                    <option value="Conrad">Conrad</option>
                                    <option value="Peninsula">Peninsula</option>
                                    <option value="Aman">Aman</option>
                                    <option value="Rosewood">Rosewood</option>
                                </optgroup>
                                <optgroup label="Премиум сегмент">
                                    <option value="Hilton">Hilton Hotels & Resorts</option>
                                    <option value="Marriott">Marriott Hotels</option>
                                    <option value="Sheraton">Sheraton</option>
                                    <option value="Westin">Westin</option>
                                    <option value="Hyatt">Hyatt</option>
                                    <option value="InterContinental">InterContinental</option>
                                    <option value="Crowne Plaza">Crowne Plaza</option>
                                    <option value="DoubleTree">DoubleTree</option>
                                    <option value="Renaissance">Renaissance Hotels</option>
                                    <option value="Fairmont">Fairmont</option>
                                    <option value="Sofitel">Sofitel</option>
                                    <option value="Pullman">Pullman</option>
                                </optgroup>
                                <optgroup label="Средний сегмент">
                                    <option value="Holiday Inn">Holiday Inn</option>
                                    <option value="Courtyard">Courtyard by Marriott</option>
                                    <option value="Hampton Inn">Hampton Inn</option>
                                    <option value="Residence Inn">Residence Inn</option>
                                    <option value="Hotel Indigo">Hotel Indigo</option>
                                    <option value="Cambria">Cambria Hotels</option>
                                    <option value="Radisson">Radisson</option>
                                    <option value="Novotel">Novotel</option>
                                    <option value="Ibis">Ibis</option>
                                </optgroup>
                                <optgroup label="Бюджетный сегмент">
                                    <option value="Holiday Inn Express">Holiday Inn Express</option>
                                    <option value="Days Inn">Days Inn</option>
                                    <option value="Super 8">Super 8</option>
                                    <option value="Ramada">Ramada</option>
                                    <option value="Comfort Inn">Comfort Inn</option>
                                    <option value="Best Western">Best Western</option>
                                </optgroup>
                                <optgroup label="Местные и региональные">
                                    <option value="Serena Hotels">Serena Hotels</option>
                                    <option value="Golden Tulip">Golden Tulip</option>
                                    <option value="Maritim">Maritim</option>
                                    <option value="Crystal Hotels">Crystal Hotels</option>
                                    <option value="Barcelo">Barcelo</option>
                                </optgroup>
                            </select>
                            
                            <!-- Hotel Stars Filter -->
                            <select id="hotelStarsFilter" class="filter-select">
                                <option value="">Звезды отеля</option>
                                <option value="5">★★★★★</option>
                                <option value="4">★★★★</option>
                                <option value="3">★★★</option>
                                <option value="2">★★</option>
                                <option value="1">★</option>
                            </select>
                            
                            <input type="date" id="dateFilter" class="filter-date" min="" placeholder="Дата">
                        </div>
                    </div>
                </div>



            <!-- Результаты поиска -->
            <div id="searchResults" class="hidden">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-bold text-gray-900">Результаты поиска</h3>
                    <button onclick="clearSearch()" class="text-gray-600 hover:text-gray-900 font-medium">Показать все туры</button>
                </div>
                <div id="toursGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
            </div>
        </div>
    </section>

    <!-- Информационные блоки -->
    <section class="py-16 bg-white">
        <div class="max-w-7xl mx-auto px-6">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- Бесплатная отмена -->
                <div class="bg-gray-50 rounded-lg p-6 relative info-block flex flex-col h-full">
                    <h3 class="text-lg font-bold text-gray-900 mb-2 min-h-[2.5rem] flex items-center">Бесплатная отмена</h3>
                    <p class="text-sm text-gray-600 mb-4 flex-grow min-h-[3rem] flex items-start">Отмена бронирования до 30 дней до начала тура, возврат 100%</p>
                    <div class="flex justify-end mt-auto">
                        <button class="details-btn text-sm text-blue-600 hover:text-blue-800 font-medium" onclick="toggleDetails('cancel-details', this)">
                            подробнее
                        </button>
                    </div>
                    <!-- Оверлей для деталей -->
                    <div id="cancel-details" class="details-overlay hidden absolute inset-0 bg-gray-50 rounded-lg p-6 z-10">
                        <div class="h-full flex flex-col">
                            <h3 class="text-lg font-bold text-gray-900 mb-2">Бесплатная отмена</h3>
                            <div class="flex-grow overflow-y-auto pr-2">
                                <p class="text-sm text-gray-700 leading-relaxed mb-3">
                                    Бесплатная отмена – отмена тура со стороны клиента в срок до 30 дней до начала тура, возврат 100%. Однако данный возврат не распространяется на туры, забронированные менее чем за этот срок.
                                </p>
                                <p class="text-sm text-gray-700 leading-relaxed">
                                    Система должна распознавать эти требования автоматически.
                                </p>
                            </div>
                            <div class="flex justify-end mt-4">
                                <button class="details-btn text-sm text-red-600 hover:text-red-800 font-medium" onclick="toggleDetails('cancel-details', this)">
                                    скрыть
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Бронируй сейчас - плати потом -->
                <div class="bg-gray-50 rounded-lg p-6 relative info-block flex flex-col h-full">
                    <h3 class="text-lg font-bold text-gray-900 mb-2 min-h-[2.5rem] flex items-center">Бронируй сейчас - плати потом</h3>
                    <p class="text-sm text-gray-600 mb-4 flex-grow min-h-[3rem] flex items-start">Записывайтесь на групповые туры всего за 10% от стоимости тура</p>
                    <div class="flex justify-end mt-auto">
                        <button class="details-btn text-sm text-blue-600 hover:text-blue-800 font-medium" onclick="toggleDetails('book-details', this)">
                            подробнее
                        </button>
                    </div>
                    <!-- Оверлей для деталей -->
                    <div id="book-details" class="details-overlay hidden absolute inset-0 bg-gray-50 rounded-lg p-6 z-10">
                        <div class="h-full flex flex-col">
                            <h3 class="text-lg font-bold text-gray-900 mb-2">Бронируй сейчас - плати потом</h3>
                            <div class="flex-grow overflow-y-auto pr-2">
                                <p class="text-sm text-gray-700 leading-relaxed mb-3">
                                    Турист записывается на групповой общий тур; оплачивает 10% от стоимости тура, чтобы забронировать тур. Это раннее бронирование за 12 месяцев (минимум до 30 дней до начала тура).
                                </p>
                                <p class="text-sm text-gray-700 leading-relaxed">
                                    В калькуляторе нужно установить ограничение: любая запись на тур доступна в срок бронирования до 30 дней; в 29-й день до срока доступ закрывается.
                                </p>
                            </div>
                            <div class="flex justify-end mt-4">
                                <button class="details-btn text-sm text-red-600 hover:text-red-800 font-medium" onclick="toggleDetails('book-details', this)">
                                    скрыть
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Горящие туры -->
                <div class="bg-gray-50 rounded-lg p-6 relative info-block flex flex-col h-full">
                    <h3 class="text-lg font-bold text-gray-900 mb-2 min-h-[2.5rem] flex items-center">Горящие туры</h3>
                    <p class="text-sm text-gray-600 mb-4 flex-grow min-h-[3rem] flex items-start">Успейте забронировать туры и экскурсии за доступные цены!</p>
                    <div class="flex justify-end mt-auto">
                        <button class="details-btn text-sm text-blue-600 hover:text-blue-800 font-medium" onclick="toggleDetails('hot-details', this)">
                            подробнее
                        </button>
                    </div>
                    <!-- Оверлей для деталей -->
                    <div id="hot-details" class="details-overlay hidden absolute inset-0 bg-gray-50 rounded-lg p-6 z-10">
                        <div class="h-full flex flex-col">
                            <h3 class="text-lg font-bold text-gray-900 mb-2">Горящие туры</h3>
                            <div class="flex-grow overflow-y-auto pr-2">
                                <p class="text-sm text-gray-700 leading-relaxed mb-3">
                                    В системе бронирования необходимо установить лимит, когда необходимо, чтобы туры, особенно групповые общие экскурсии, были переключены в категорию "Горящие туры".
                                </p>
                                <p class="text-sm text-gray-700 leading-relaxed">
                                    Пока остается так, однако два предыдущих блока "Бронируй сейчас, плати потом" и "Горящие туры" входят в этот компонент.
                                </p>
                            </div>
                            <div class="flex justify-end mt-4">
                                <button class="details-btn text-sm text-red-600 hover:text-red-800 font-medium" onclick="toggleDetails('hot-details', this)">
                                    скрыть
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Акции -->
                <div class="bg-gray-50 rounded-lg p-6 relative info-block flex flex-col h-full">
                    <h3 class="text-lg font-bold text-gray-900 mb-2 min-h-[2.5rem] flex items-center">Акции</h3>
                    <p class="text-sm text-gray-600 mb-4 flex-grow min-h-[3rem] flex items-start">Бронируйте любой тур за 12 месяцев и экономьте 12%, это и другие привилегии у нас!</p>
                    <div class="flex justify-end mt-auto">
                        <button class="details-btn text-sm text-blue-600 hover:text-blue-800 font-medium" onclick="toggleDetails('promo-details', this)">
                            подробнее
                        </button>
                    </div>
                    <!-- Оверлей для деталей -->
                    <div id="promo-details" class="details-overlay hidden absolute inset-0 bg-gray-50 rounded-lg p-6 z-10">
                        <div class="h-full flex flex-col">
                            <h3 class="text-lg font-bold text-gray-900 mb-2">Акции</h3>
                            <div class="flex-grow overflow-y-auto pr-2">
                                <p class="text-sm text-gray-700 leading-relaxed">
                                    Пока остается так, однако два предыдущих блока "Бронируй сейчас, плати потом" входят в этот компонент.
                                </p>
                            </div>
                            <div class="flex justify-end mt-4">
                                <button class="details-btn text-sm text-red-600 hover:text-red-800 font-medium" onclick="toggleDetails('promo-details', this)">
                                    скрыть
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Динамические туры загружаются сюда через JavaScript -->
    <!-- Секции туров будут созданы автоматически функцией loadTourBlocks() -->



    <!-- Виды туров -->
    <section class="py-20 bg-gray-50">
        <div class="max-w-7xl mx-auto px-6">
            <h2 class="text-4xl font-bold text-center mb-12 text-gray-900">
                Виды туров
            </h2>
            
            <!-- Чистый блок с видами туров -->
            <div class="bg-white rounded-xl shadow-lg p-10 border border-gray-200">
                <div class="flex flex-col md:flex-row">
                    <!-- Персональный -->
                    <div class="text-center flex-1 px-6 py-4">
                        <h3 class="text-xl font-bold text-gray-900 mb-3">Персональный</h3>
                        <p class="text-gray-600 text-sm leading-relaxed">Только для вас с персональным подходом</p>
                    </div>

                    <!-- Разделитель 1 -->
                    <div class="hidden md:block w-px bg-gradient-to-b from-transparent via-gray-300 to-transparent self-stretch mx-2"></div>
                    <div class="block md:hidden h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent my-4 mx-8"></div>

                    <!-- Групповой персональный -->
                    <div class="text-center flex-1 px-6 py-4">
                        <h3 class="text-xl font-bold text-gray-900 mb-3">Групповой персональный</h3>
                        <p class="text-gray-600 text-sm leading-relaxed">Комфортный тур для группы до 4 человек с персональным подходом</p>
                    </div>

                    <!-- Разделитель 2 -->
                    <div class="hidden md:block w-px bg-gradient-to-b from-transparent via-gray-300 to-transparent self-stretch mx-2"></div>
                    <div class="block md:hidden h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent my-4 mx-8"></div>

                    <!-- Групповой общий -->
                    <div class="text-center flex-1 px-6 py-4">
                        <h3 class="text-xl font-bold text-gray-900 mb-3">Групповой общий</h3>
                        <p class="text-gray-600 text-sm leading-relaxed">Экономичный тур для группы до 20 человек, куда каждый может присоединиться</p>
                    </div>

                    <!-- Разделитель 3 -->
                    <div class="hidden md:block w-px bg-gradient-to-b from-transparent via-gray-300 to-transparent self-stretch mx-2"></div>
                    <div class="block md:hidden h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent my-4 mx-8"></div>

                    <!-- Специальный -->
                    <div class="text-center flex-1 px-6 py-4">
                        <h3 class="text-xl font-bold text-gray-900 mb-3">Специальный</h3>
                        <p class="text-gray-600 text-sm leading-relaxed">Тур, составленный по вашим личным пожеланиям с персональным подходом</p>
                    </div>
                </div>
            </div>
        </div>
    </section>



    <!-- Динамические блоки туров загружаются здесь -->
    <div id="tour-blocks-container">
        <!-- Блоки туров будут загружены динамически через JavaScript -->
    </div>

    <section class="py-16 bg-gray-50">
        <div class="max-w-7xl mx-auto px-6">
            <h2 class="text-3xl font-bold text-center mb-12 text-gray-900">
                Наши услуги
            </h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                <!-- Трансфер -->
                <div class="service-card rounded-xl p-8 flex flex-col h-full" style="--icon-color-1: #3E3E3E; --icon-color-2: #2E2E2E; --icon-shadow: rgba(62, 62, 62, 0.3);">
                    <div class="flex flex-col items-center text-center mb-6">
                        <div class="mb-6 flex justify-center">
                            <svg width="64" height="64" viewBox="0 0 64 64" fill="none" class="car-icon">
                                <!-- Bus body main -->
                                <rect x="8" y="24" width="48" height="24" rx="4" fill="#3B82F6"/>
                                <rect x="8" y="24" width="48" height="24" rx="4" stroke="#1D4ED8" stroke-width="1"/>
                                
                                <!-- Front and back -->
                                <rect x="8" y="28" width="4" height="16" rx="2" fill="#1D4ED8"/>
                                <rect x="52" y="28" width="4" height="16" rx="2" fill="#1D4ED8"/>
                                
                                <!-- Windows -->
                                <rect x="12" y="28" width="8" height="8" rx="1" fill="#E5F3FF"/>
                                <rect x="22" y="28" width="8" height="8" rx="1" fill="#E5F3FF"/>
                                <rect x="32" y="28" width="8" height="8" rx="1" fill="#E5F3FF"/>
                                <rect x="42" y="28" width="8" height="8" rx="1" fill="#E5F3FF"/>
                                
                                <!-- Door -->
                                <rect x="26" y="38" width="12" height="10" rx="1" fill="#1D4ED8"/>
                                <rect x="30" y="42" width="1" height="6" fill="#E5F3FF"/>
                                
                                <!-- Wheels -->
                                <circle cx="18" cy="52" r="6" fill="#374151"/>
                                <circle cx="46" cy="52" r="6" fill="#374151"/>
                                <circle cx="18" cy="52" r="3" fill="#9CA3AF"/>
                                <circle cx="46" cy="52" r="3" fill="#9CA3AF"/>
                                
                                <!-- Headlights -->
                                <circle cx="6" cy="32" r="2" fill="#FEF3C7"/>
                                <circle cx="6" cy="40" r="2" fill="#FEF3C7"/>
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900 mb-2">ТРАНСФЕР</h3>
                    </div>
                    <ul class="text-sm text-gray-700 mb-6 space-y-2 flex-grow">
                        <li class="flex items-start"><span class="mr-2" style="color: #3E3E3E;">•</span> Поездки по территории всех 5-СТАН с опытными водителями</li>
                        <li class="flex items-start"><span class="mr-2" style="color: #3E3E3E;">•</span> Встречи в аэропорту, ЖД и границах 5-СТАН</li>
                        <li class="flex items-start"><span class="mr-2" style="color: #3E3E3E;">•</span> Межстрановые и межгородские поездки</li>
                        <li class="flex items-start"><span class="mr-2" style="color: #3E3E3E;">•</span> Доступные и комфортные автомобили</li>
                    </ul>
                    <button class="w-full text-white py-3 px-6 rounded-xl font-bold transition-all duration-300 hover:scale-105 hover:shadow-lg mt-auto" style="background-color: #3E3E3E;">
                        Заказать трансфер
                    </button>
                </div>

                <!-- Тур-гиды -->
                <div class="service-card rounded-xl p-8 flex flex-col h-full" style="--icon-color-1: #3E3E3E; --icon-color-2: #2E2E2E; --icon-shadow: rgba(62, 62, 62, 0.3);">
                    <div class="flex flex-col items-center text-center mb-6">
                        <div class="mb-6 flex justify-center">
                            <svg width="64" height="64" viewBox="0 0 64 64" fill="none" class="guide-icon">
                                <!-- Map/document background -->
                                <rect x="20" y="16" width="24" height="32" rx="2" fill="#FFFFFF" stroke="#D1D5DB"/>
                                
                                <!-- Person head -->
                                <circle cx="32" cy="12" r="6" fill="#FBBF24"/>
                                
                                <!-- Person body -->
                                <rect x="28" y="18" width="8" height="12" rx="2" fill="#3B82F6"/>
                                
                                <!-- Arms -->
                                <rect x="24" y="22" width="4" height="8" rx="2" fill="#FBBF24"/>
                                <rect x="36" y="22" width="4" height="8" rx="2" fill="#FBBF24"/>
                                
                                <!-- Map details -->
                                <rect x="24" y="20" width="16" height="1" fill="#E5E7EB"/>
                                <rect x="24" y="24" width="12" height="1" fill="#E5E7EB"/>
                                <rect x="24" y="28" width="14" height="1" fill="#E5E7EB"/>
                                <rect x="24" y="32" width="10" height="1" fill="#E5E7EB"/>
                                
                                <!-- Location pin on map -->
                                <circle cx="34" cy="38" r="3" fill="#EF4444"/>
                                <circle cx="34" cy="36" r="1" fill="#FFFFFF"/>
                                
                                <!-- Route lines on map -->
                                <path d="M26 42 Q30 38 34 36 Q38 34 40 38" stroke="#10B981" stroke-width="2" fill="none"/>
                                
                                <!-- Person face -->
                                <circle cx="30" cy="10" r="0.5" fill="#374151"/>
                                <circle cx="34" cy="10" r="0.5" fill="#374151"/>
                                <path d="M30 14h4" stroke="#374151" stroke-width="0.5" stroke-linecap="round"/>
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900 mb-2">ТУР-ГИДЫ</h3>
                    </div>
                    <ul class="text-sm text-gray-700 mb-6 space-y-2 flex-grow">
                        <li class="flex items-start"><span class="mr-2" style="color: #3E3E3E;">•</span> Опытные тур-гиды во всех 5-СТАН</li>
                        <li class="flex items-start"><span class="mr-2" style="color: #3E3E3E;">•</span> Профессиональное сопровождение</li>
                        <li class="flex items-start"><span class="mr-2" style="color: #3E3E3E;">•</span> Знание местности и владение разными языками</li>
                        <li class="flex items-start"><span class="mr-2" style="color: #3E3E3E;">•</span> Друг в поездке, экономия и безопасность</li>
                    </ul>
                    <button class="w-full text-white py-3 px-6 rounded-xl font-bold transition-all duration-300 hover:scale-105 hover:shadow-lg mt-auto" style="background-color: #3E3E3E;">
                        Заказать тур-гида
                    </button>
                </div>

                <!-- Агентский сервис -->
                <div class="service-card rounded-xl p-8 flex flex-col h-full" style="--icon-color-1: #3E3E3E; --icon-color-2: #2E2E2E; --icon-shadow: rgba(62, 62, 62, 0.3);">
                    <div class="flex flex-col items-center text-center mb-6">
                        <div class="mb-6 flex justify-center">
                            <svg width="64" height="64" viewBox="0 0 64 64" fill="none" class="agency-icon">
                                <!-- Office building -->
                                <rect x="20" y="12" width="24" height="40" rx="2" fill="#6B7280"/>
                                <rect x="20" y="12" width="24" height="40" rx="2" stroke="#374151" stroke-width="1"/>
                                
                                <!-- Building windows -->
                                <rect x="24" y="16" width="3" height="3" fill="#FEF3C7"/>
                                <rect x="29" y="16" width="3" height="3" fill="#FEF3C7"/>
                                <rect x="35" y="16" width="3" height="3" fill="#FEF3C7"/>
                                
                                <rect x="24" y="22" width="3" height="3" fill="#FEF3C7"/>
                                <rect x="29" y="22" width="3" height="3" fill="#E5E7EB"/>
                                <rect x="35" y="22" width="3" height="3" fill="#FEF3C7"/>
                                
                                <rect x="24" y="28" width="3" height="3" fill="#E5E7EB"/>
                                <rect x="29" y="28" width="3" height="3" fill="#FEF3C7"/>
                                <rect x="35" y="28" width="3" height="3" fill="#E5E7EB"/>
                                
                                <rect x="24" y="34" width="3" height="3" fill="#FEF3C7"/>
                                <rect x="29" y="34" width="3" height="3" fill="#E5E7EB"/>
                                <rect x="35" y="34" width="3" height="3" fill="#FEF3C7"/>
                                
                                <!-- Entrance -->
                                <rect x="28" y="42" width="8" height="10" rx="1" fill="#374151"/>
                                <rect x="30" y="44" width="4" height="8" rx="0.5" fill="#D1D5DB"/>
                                <circle cx="33" cy="48" r="0.5" fill="#374151"/>
                                
                                <!-- Service symbol -->
                                <circle cx="32" cy="8" r="4" fill="#3B82F6"/>
                                <path d="M30 8l2 2l4-4" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                
                                <!-- Side buildings -->
                                <rect x="12" y="24" width="8" height="28" fill="#9CA3AF"/>
                                <rect x="44" y="20" width="8" height="32" fill="#9CA3AF"/>
                                
                                <!-- Additional windows -->
                                <rect x="14" y="28" width="2" height="2" fill="#E5E7EB"/>
                                <rect x="14" y="32" width="2" height="2" fill="#E5E7EB"/>
                                <rect x="46" y="24" width="2" height="2" fill="#E5E7EB"/>
                                <rect x="46" y="28" width="2" height="2" fill="#E5E7EB"/>
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900 mb-2">АГЕНТСКИЙ СЕРВИС</h3>
                    </div>
                    <ul class="text-sm text-gray-700 mb-6 space-y-2 flex-grow">
                        <li class="flex items-start"><span class="mr-2" style="color: #3E3E3E;">•</span> Тур-агентские услуги во всех 5-СТАН</li>
                        <li class="flex items-start"><span class="mr-2" style="color: #3E3E3E;">•</span> Готовые и доступные тур-пакеты для реализации</li>
                        <li class="flex items-start"><span class="mr-2" style="color: #3E3E3E;">•</span> Вознаграждения за каждый реализованный пакет</li>
                        <li class="flex items-start"><span class="mr-2" style="color: #3E3E3E;">•</span> Гибкие и взаимовыгодные условия партнерства</li>
                    </ul>
                    <button class="w-full text-white py-3 px-6 rounded-xl font-bold transition-all duration-300 hover:scale-105 hover:shadow-lg mt-auto" style="background-color: #3E3E3E;">
                        Стать Турагентом
                    </button>
                </div>

                <!-- Собственный тур -->
                <div class="service-card rounded-xl p-8 flex flex-col h-full" style="--icon-color-1: #3E3E3E; --icon-color-2: #2E2E2E; --icon-shadow: rgba(62, 62, 62, 0.3);">
                    <div class="flex flex-col items-center text-center mb-6">
                        <div class="mb-6 flex justify-center">
                            <svg width="64" height="64" viewBox="0 0 64 64" fill="none" class="class-icon">
                                <!-- Suitcase main body -->
                                <rect x="16" y="28" width="32" height="24" rx="4" fill="#F59E0B"/>
                                <rect x="16" y="28" width="32" height="24" rx="4" stroke="#D97706" stroke-width="1"/>
                                
                                <!-- Suitcase handle -->
                                <rect x="26" y="24" width="12" height="4" rx="2" fill="#92400E"/>
                                <rect x="28" y="20" width="8" height="4" rx="1" fill="none" stroke="#92400E" stroke-width="2"/>
                                
                                <!-- Suitcase details -->
                                <rect x="18" y="34" width="28" height="1" fill="#D97706"/>
                                <rect x="18" y="42" width="28" height="1" fill="#D97706"/>
                                
                                <!-- Locks -->
                                <rect x="20" y="38" width="3" height="2" rx="0.5" fill="#92400E"/>
                                <rect x="41" y="38" width="3" height="2" rx="0.5" fill="#92400E"/>
                                
                                <!-- Corner reinforcements -->
                                <circle cx="20" cy="32" r="1" fill="#92400E"/>
                                <circle cx="44" cy="32" r="1" fill="#92400E"/>
                                <circle cx="20" cy="48" r="1" fill="#92400E"/>
                                <circle cx="44" cy="48" r="1" fill="#92400E"/>
                                
                                <!-- Travel stickers -->
                                <circle cx="24" cy="36" r="2" fill="#3B82F6"/>
                                <rect x="36" y="44" width="4" height="2" rx="1" fill="#EF4444"/>
                                <polygon points="28,46 32,44 32,48" fill="#10B981"/>
                                
                                <!-- Wheels -->
                                <circle cx="22" cy="54" r="3" fill="#374151"/>
                                <circle cx="42" cy="54" r="3" fill="#374151"/>
                                <circle cx="22" cy="54" r="1.5" fill="#9CA3AF"/>
                                <circle cx="42" cy="54" r="1.5" fill="#9CA3AF"/>
                                
                                <!-- Pull handle extended -->
                                <rect x="30" y="12" width="4" height="8" fill="#9CA3AF"/>
                                <rect x="28" y="12" width="8" height="2" rx="1" fill="#6B7280"/>
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900 mb-2">СОБСТВЕННЫЙ ТУР</h3>
                    </div>
                    <ul class="text-sm text-gray-700 mb-6 space-y-2 flex-grow">
                        <li class="flex items-start"><span class="mr-2" style="color: #3E3E3E;">•</span> Создайте свой тур по всем 5-СТАН</li>
                        <li class="flex items-start"><span class="mr-2" style="color: #3E3E3E;">•</span> Выбор маршрута по своему усмотрению</li>
                        <li class="flex items-start"><span class="mr-2" style="color: #3E3E3E;">•</span> Подбор отелей и класс проживания</li>
                        <li class="flex items-start"><span class="mr-2" style="color: #3E3E3E;">•</span> Гибкая настройка времени визитов</li>
                    </ul>
                    <button class="w-full text-white py-3 px-6 rounded-xl font-bold transition-all duration-300 hover:scale-105 hover:shadow-lg mt-auto" style="background-color: #3E3E3E;">
                        Создать Тур
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Направления -->
    <section class="py-16 bg-gray-50">
        <div class="max-w-7xl mx-auto px-6">
            <h2 class="text-3xl font-bold text-center mb-12 text-gray-900">
                Туры по городам
            </h2>
            
            <div class="grid grid-cols-2 md:grid-cols-5 gap-4">
                <!-- Душанбе -->
                <div class="relative group cursor-pointer overflow-hidden rounded-lg h-32">
                    <div class="absolute inset-0 bg-gray-200"></div>
                    <div class="absolute inset-0 bg-black bg-opacity-40 group-hover:bg-opacity-30 transition-all"></div>
                    <div class="absolute inset-0 flex items-center justify-center text-white">
                        <h3 class="text-lg font-bold">Душанбе</h3>
                    </div>
                </div>

                <!-- Хорог -->
                <div class="relative group cursor-pointer overflow-hidden rounded-lg h-32">
                    <div class="absolute inset-0 bg-gray-200"></div>
                    <div class="absolute inset-0 bg-black bg-opacity-40 group-hover:bg-opacity-30 transition-all"></div>
                    <div class="absolute inset-0 flex items-center justify-center text-white">
                        <h3 class="text-lg font-bold">Хорог</h3>
                    </div>
                </div>

                <!-- Худжанд -->
                <div class="relative group cursor-pointer overflow-hidden rounded-lg h-32">
                    <div class="absolute inset-0 bg-gray-200"></div>
                    <div class="absolute inset-0 bg-black bg-opacity-40 group-hover:bg-opacity-30 transition-all"></div>
                    <div class="absolute inset-0 flex items-center justify-center text-white">
                        <h3 class="text-lg font-bold">Худжанд</h3>
                    </div>
                </div>

                <!-- Ташкент -->
                <div class="relative group cursor-pointer overflow-hidden rounded-lg h-32">
                    <div class="absolute inset-0 bg-gray-200"></div>
                    <div class="absolute inset-0 bg-black bg-opacity-40 group-hover:bg-opacity-30 transition-all"></div>
                    <div class="absolute inset-0 flex items-center justify-center text-white">
                        <h3 class="text-lg font-bold">Ташкент</h3>
                    </div>
                </div>

                <!-- Самарканд -->
                <div class="relative group cursor-pointer overflow-hidden rounded-lg h-32">
                    <div class="absolute inset-0 bg-gray-200"></div>
                    <div class="absolute inset-0 bg-black bg-opacity-40 group-hover:bg-opacity-30 transition-all"></div>
                    <div class="absolute inset-0 flex items-center justify-center text-white">
                        <h3 class="text-lg font-bold">Самарканд</h3>
                    </div>
                </div>

                <!-- Бухара -->
                <div class="relative group cursor-pointer overflow-hidden rounded-lg h-32">
                    <div class="absolute inset-0 bg-gray-200"></div>
                    <div class="absolute inset-0 bg-black bg-opacity-40 group-hover:bg-opacity-30 transition-all"></div>
                    <div class="absolute inset-0 flex items-center justify-center text-white">
                        <h3 class="text-lg font-bold">Бухара</h3>
                    </div>
                </div>

                <!-- Бишкек -->
                <div class="relative group cursor-pointer overflow-hidden rounded-lg h-32">
                    <div class="absolute inset-0 bg-gray-200"></div>
                    <div class="absolute inset-0 bg-black bg-opacity-40 group-hover:bg-opacity-30 transition-all"></div>
                    <div class="absolute inset-0 flex items-center justify-center text-white">
                        <h3 class="text-lg font-bold">Бишкек</h3>
                    </div>
                </div>

                <!-- Астана -->
                <div class="relative group cursor-pointer overflow-hidden rounded-lg h-32">
                    <div class="absolute inset-0 bg-gray-200"></div>
                    <div class="absolute inset-0 bg-black bg-opacity-40 group-hover:bg-opacity-30 transition-all"></div>
                    <div class="absolute inset-0 flex items-center justify-center text-white">
                        <h3 class="text-lg font-bold">Астана</h3>
                    </div>
                </div>

                <!-- Алматы -->
                <div class="relative group cursor-pointer overflow-hidden rounded-lg h-32">
                    <div class="absolute inset-0 bg-gray-200"></div>
                    <div class="absolute inset-0 bg-black bg-opacity-40 group-hover:bg-opacity-30 transition-all"></div>
                    <div class="absolute inset-0 flex items-center justify-center text-white">
                        <h3 class="text-lg font-bold">Алматы</h3>
                    </div>
                </div>

                <!-- Ашхабад -->
                <div class="relative group cursor-pointer overflow-hidden rounded-lg h-32">
                    <div class="absolute inset-0 bg-gray-200"></div>
                    <div class="absolute inset-0 bg-black bg-opacity-40 group-hover:bg-opacity-30 transition-all"></div>
                    <div class="absolute inset-0 flex items-center justify-center text-white">
                        <h3 class="text-lg font-bold">Ашхабад</h3>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Блок Отзывы -->
    <section class="py-16 bg-white">
        <div class="max-w-7xl mx-auto px-6">
            <h2 class="text-3xl font-bold text-center mb-12 text-gray-900">
                Отзывы наших клиентов
            </h2>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <!-- Отзыв 1 -->
                <div class="bg-gray-50 rounded-lg p-6">
                    <div class="flex items-center mb-4">
                        <div class="w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold">
                            А
                        </div>
                        <div class="ml-4">
                            <h3 class="font-semibold text-gray-900">Анна Петрова</h3>
                            <div class="flex items-center">
                                <div class="flex text-yellow-400">★★★★★</div>
                                <span class="text-sm text-gray-500 ml-2">5.0</span>
                            </div>
                        </div>
                    </div>
                    <p class="text-gray-600 text-sm">
                        "Потрясающий тур по Памирскому шоссе! Организация на высшем уровне, гиды профессиональные. Виды невероятные, особенно озеро Каракуль. Bunyod-Tour превзошли все ожидания!"
                    </p>
                    <div class="text-xs text-gray-400 mt-3">Тур: Памирское шоссе • Июль 2024</div>
                </div>

                <!-- Отзыв 2 -->
                <div class="bg-gray-50 rounded-lg p-6">
                    <div class="flex items-center mb-4">
                        <div class="w-12 h-12 bg-green-500 rounded-full flex items-center justify-center text-white font-bold">
                            М
                        </div>
                        <div class="ml-4">
                            <h3 class="font-semibold text-gray-900">Михаил Сергеев</h3>
                            <div class="flex items-center">
                                <div class="flex text-yellow-400">★★★★★</div>
                                <span class="text-sm text-gray-500 ml-2">5.0</span>
                            </div>
                        </div>
                    </div>
                    <p class="text-gray-600 text-sm">
                        "Культурный тур по Самарканду оставил неизгладимые впечатления. Исторические памятники, восточные базары, гостеприимство местных жителей - всё на высоте. Рекомендую всем!"
                    </p>
                    <div class="text-xs text-gray-400 mt-3">Тур: Самарканд • Август 2024</div>
                </div>

                <!-- Отзыв 3 -->
                <div class="bg-gray-50 rounded-lg p-6">
                    <div class="flex items-center mb-4">
                        <div class="w-12 h-12 bg-purple-500 rounded-full flex items-center justify-center text-white font-bold">
                            Е
                        </div>
                        <div class="ml-4">
                            <h3 class="font-semibold text-gray-900">Елена Козлова</h3>
                            <div class="flex items-center">
                                <div class="flex text-yellow-400">★★★★★</div>
                                <span class="text-sm text-gray-500 ml-2">4.8</span>
                            </div>
                        </div>
                    </div>
                    <p class="text-gray-600 text-sm">
                        "Семейное путешествие в Киргизстан прошло замечательно! Озеро Иссык-Куль, горные пейзажи, национальная кухня - дети в восторге. Спасибо за организацию!"
                    </p>
                    <div class="text-xs text-gray-400 mt-3">Тур: Иссык-Куль • Сентябрь 2024</div>
                </div>
            </div>
            
            <div class="text-center mt-8">
                <button class="bg-gray-800 hover:bg-gray-700 text-white px-6 py-3 rounded-lg transition-colors">
                    Посмотреть все отзывы
                </button>
            </div>
        </div>
    </section>



    <!-- Футер -->
    <footer class="py-12 text-white" style="background-color: #3E3E3E;">
        <div class="max-w-6xl mx-auto px-6">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <!-- Компания -->
                <div>
                    <h4 class="font-semibold mb-4">Компания:</h4>
                    <ul class="space-y-2 text-sm text-gray-300">
                        <li><a href="about-us.html" class="hover:text-white">О нас</a></li>
                        <li><a href="tour-agents.html" class="hover:text-white">Тур-агентам</a></li>
                        <li><a href="#" class="hover:text-white">Партнеры</a></li>
                        <li><a href="investment-projects.html" class="hover:text-white">Инвестиционные Проекты</a></li>
                        <li><a href="booking-guide.html" class="hover:text-white">Как бронировать туры?</a></li>
                        <li><a href="tours-search.html" class="hover:text-white">Каталог туров</a></li>
                    </ul>
                </div>
                
                <!-- Социальные страницы -->
                <div>
                    <h4 class="font-semibold mb-4">Социальные страницы:</h4>
                    <div class="flex space-x-4 mb-4">
                        <!-- Facebook -->
                        <a href="https://www.facebook.com/Tajikistanservice" target="_blank" class="text-gray-300 hover:text-white">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                            </svg>
                        </a>
                        <!-- Instagram -->
                        <a href="https://www.instagram.com/bunyodtour.tj/" target="_blank" class="text-gray-300 hover:text-white">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                            </svg>
                        </a>
                        <!-- YouTube -->
                        <a href="https://www.youtube.com/channel/UCdnjmRbMVO2R7HtXAxERBjw" target="_blank" class="text-gray-300 hover:text-white">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                            </svg>
                        </a>
                        <!-- WhatsApp -->
                        <a href="https://api.whatsapp.com/send/?phone=992915123344&text&type=phone_number&app_absent=0" target="_blank" class="text-gray-300 hover:text-white">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.893 3.386"/>
                            </svg>
                        </a>
                        <!-- Telegram -->
                        <a href="https://telegram.org/" target="_blank" class="text-gray-300 hover:text-white">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/>
                            </svg>
                        </a>
                    </div>
                    <p class="text-sm text-gray-300">
                        Лицензия на туристическую деятельность ФС№ 0000253, от 25.10.2022 г.
                    </p>
                </div>
                
                <!-- Контакты -->
                <div>
                    <h4 class="font-semibold mb-4">Контакты:</h4>
                    <div class="space-y-2 text-sm text-gray-300">
                        <p>+992 44 625 7575; +992 93-126-1134</p>
                        <p>+992 00-110-0087; +992 88-235-3434</p>
                        <p>info@bunyodtour.tj</p>
                        <p><a href="oferta-ru.pdf" target="_blank" class="hover:text-white text-blue-300">Публичная Оферта-Договор</a></p>
                        <p><a href="payment-rules-ru.pdf" target="_blank" class="hover:text-white text-blue-300">Правила оплаты и возврата средств</a></p>
                        <p><a href="privacy-policy-ru.pdf" target="_blank" class="hover:text-white text-blue-300">Политика конфиденциальности</a></p>
                    </div>
                </div>
            </div>
            
            <!-- Google Map Section -->
            <div class="border-t border-gray-600 mt-8 pt-8">
                <h4 class="font-semibold mb-4 text-white text-center">Наше местоположение:</h4>
                <div class="w-full h-64 rounded-lg overflow-hidden shadow-lg">
                    <div id="map" class="w-full h-full"></div>
                </div>
            </div>
            
            <div class="border-t border-gray-600 mt-8 pt-8 text-center text-sm text-gray-300">
                <p>Все права защищены | ООО "Бунёд-Тур" (2017-2025) | ИНН: 010098739; ОГРН: 0110023137</p>
            </div>
        </div>
    </footer>

    <script>
        // Функция для переключения деталей информационных блоков
        function toggleDetails(detailsId, button) {
            const detailsElement = document.getElementById(detailsId);
            
            if (detailsElement.classList.contains('hidden')) {
                detailsElement.classList.remove('hidden');
            } else {
                detailsElement.classList.add('hidden');
            }
        }

        // Данные о городах по странам - загружаются динамически из API
        let citiesByCountry = {};
        let countriesData = [];
        let citiesData = [];
        
        // Загрузка стран и городов из API
        async function loadCountriesAndCities() {
            try {
                // Загружаем страны
                const countriesResponse = await fetch('/api/countries');
                if (countriesResponse.ok) {
                    const countriesResult = await countriesResponse.json();
                    if (countriesResult.success) {
                        countriesData = countriesResult.data;
                        console.log('✅ Countries loaded:', countriesData.length);
                    }
                }
                
                // Загружаем города
                const citiesResponse = await fetch('/api/cities');
                if (citiesResponse.ok) {
                    const citiesResult = await citiesResponse.json();
                    if (citiesResult.success) {
                        citiesData = citiesResult.data;
                        console.log('✅ Cities loaded:', citiesData.length);
                        
                        // Группируем города по странам
                        citiesByCountry = {};
                        countriesData.forEach(country => {
                            const countryName = country.nameRu;
                            const countryCities = citiesData.filter(city => 
                                city.countryId === country.id
                            ).map(city => city.nameRu);
                            citiesByCountry[countryName] = countryCities;
                        });
                        
                        console.log('✅ Cities organized by country:', citiesByCountry);
                    }
                }
            } catch (error) {
                console.error('❌ Error loading countries and cities:', error);
                // Fallback к старым данным если API недоступен
                citiesByCountry = {
                    'Таджикистан': ['Душанбе', 'Худжанд', 'Хорог'],
                    'Узбекистан': ['Ташкент', 'Самарканд', 'Бухара'],
                    'Кыргызстан': ['Бишкек'],
                    'Казахстан': ['Астана', 'Алматы'],
                    'Туркменистан': ['Ашхабад']
                };
            }
        }

        // Данные отелей по странам
        const hotelsByCountry = {
            'Таджикистан': [
                {group: 'Люкс сегмент', hotels: ['Serena Hotels', 'Crystal Hotels']},
                {group: 'Премиум сегмент', hotels: ['Hilton', 'Marriott', 'InterContinental', 'Hyatt']},
                {group: 'Средний сегмент', hotels: ['Holiday Inn', 'Radisson', 'Novotel']},
                {group: 'Местные и региональные', hotels: ['Golden Tulip', 'Maritim']}
            ],
            'Узбекистан': [
                {group: 'Люкс сегмент', hotels: ['Four Seasons', 'Ritz-Carlton', 'St. Regis']},
                {group: 'Премиум сегмент', hotels: ['Hilton', 'Marriott', 'Hyatt', 'InterContinental', 'Sheraton', 'Westin']},
                {group: 'Средний сегмент', hotels: ['Holiday Inn', 'Courtyard', 'Radisson', 'Novotel', 'Ibis']},
                {group: 'Местные и региональные', hotels: ['Serena Hotels', 'Golden Tulip', 'Barcelo']}
            ],
            'Казахстан': [
                {group: 'Люкс сегмент', hotels: ['Ritz-Carlton', 'St. Regis', 'Four Seasons']},
                {group: 'Премиум сегмент', hotels: ['Marriott', 'Hilton', 'InterContinental', 'Hyatt', 'Sheraton']},
                {group: 'Средний сегмент', hotels: ['Holiday Inn', 'Radisson', 'Courtyard', 'Hampton Inn']},
                {group: 'Бюджетный сегмент', hotels: ['Holiday Inn Express', 'Comfort Inn', 'Best Western']}
            ],
            'Кыргызстан': [
                {group: 'Премиум сегмент', hotels: ['Hyatt', 'Sheraton']},
                {group: 'Средний сегмент', hotels: ['Radisson', 'Novotel', 'Holiday Inn']},
                {group: 'Бюджетный сегмент', hotels: ['Best Western', 'Comfort Inn']},
                {group: 'Местные и региональные', hotels: ['Golden Tulip', 'Crystal Hotels']}
            ],
            'Туркменистан': [
                {group: 'Люкс сегмент', hotels: ['Aman']},
                {group: 'Премиум сегмент', hotels: ['Sheraton', 'Sofitel']},
                {group: 'Средний сегмент', hotels: ['Radisson', 'Holiday Inn']},
                {group: 'Местные и региональные', hotels: ['Golden Tulip', 'Maritim']}
            ]
        };

        // Функция для обновления списка городов
        function updateCities() {
            const countrySelect = document.getElementById('countryFilter');
            const citySelect = document.getElementById('cityFilter');
            
            // Очищаем список городов
            citySelect.innerHTML = '<option value="">Город</option>';
            
            const selectedCountry = countrySelect.value;
            if (selectedCountry && citiesByCountry[selectedCountry]) {
                citiesByCountry[selectedCountry].forEach(city => {
                    const option = document.createElement('option');
                    option.value = city;
                    option.textContent = city;
                    citySelect.appendChild(option);
                });
            }
        }

        // Функция для обновления списка отелей
        function updateHotels() {
            const countrySelect = document.getElementById('countryFilter');
            const hotelSelect = document.getElementById('hotelFilter');
            
            // Очищаем список отелей
            hotelSelect.innerHTML = '<option value="">Гостиницы</option>';
            
            const selectedCountry = countrySelect.value;
            if (selectedCountry && hotelsByCountry[selectedCountry]) {
                hotelsByCountry[selectedCountry].forEach(group => {
                    const optgroup = document.createElement('optgroup');
                    optgroup.label = group.group;
                    
                    group.hotels.forEach(hotel => {
                        const option = document.createElement('option');
                        option.value = hotel;
                        option.textContent = hotel;
                        optgroup.appendChild(option);
                    });
                    
                    hotelSelect.appendChild(optgroup);
                });
            }
        }
        
        // Новая функция для обновления фильтров отелей на основе страны
        function updateHotelFilters() {
            const country = document.getElementById('countryFilter').value;
            const hotelBrandFilter = document.getElementById('hotelBrandFilter');
            const hotelStarsFilter = document.getElementById('hotelStarsFilter');
            
            // Проверяем, что элементы существуют
            if (!hotelBrandFilter || !hotelStarsFilter) {
                return;
            }
            
            // Сбрасываем фильтры, если не выбрана страна
            if (!country) {
                hotelBrandFilter.disabled = false;
                hotelStarsFilter.disabled = false;
                return;
            }
            
            // Включаем фильтры для определённых стран (используем динамические данные)
            const countriesWithHotels = countriesData.map(c => c.nameRu) || ['Таджикистан', 'Узбекистан', 'Кыргызстан', 'Казахстан'];
            
            if (countriesWithHotels.includes(country)) {
                hotelBrandFilter.disabled = false;
                hotelStarsFilter.disabled = false;
            } else {
                hotelBrandFilter.disabled = true;
                hotelStarsFilter.disabled = true;
                hotelBrandFilter.value = '';
                hotelStarsFilter.value = '';
            }
        }

        // Функция для переключения панели фильтров
        function toggleFilterPanel() {
            const filterPanel = document.getElementById('filterPanel');
            if (filterPanel.classList.contains('hidden')) {
                filterPanel.classList.remove('hidden');
            } else {
                filterPanel.classList.add('hidden');
            }
        }

        // Переменные для автодополнения
        let searchTimeout;
        let currentSuggestions = [];
        
        // Функция для обработки ввода в поисковую строку
        function handleSearchInput(query) {
            clearTimeout(searchTimeout);
            
            if (query.length >= 2) {
                searchTimeout = setTimeout(() => {
                    fetchSuggestions(query);
                }, 300); // Задержка 300мс для избежания лишних запросов
            } else {
                hideSuggestions();
            }
        }
        
        // Функция для получения подсказок
        async function fetchSuggestions(query) {
            try {
                const response = await fetch(`${window.location.origin}/api/tours/suggestions?query=${encodeURIComponent(query)}`);
                const result = await response.json();
                
                if (result.success && result.data.length > 0) {
                    currentSuggestions = result.data;
                    displaySuggestions(result.data);
                } else {
                    // Показываем стандартные подсказки если API недоступен
                    showDefaultSuggestions(query);
                }
            } catch (error) {
                // Показываем стандартные подсказки если API недоступен
                showDefaultSuggestions(query);
            }
        }
        
        // Функция для отображения подсказок
        function displaySuggestions(suggestions) {
            const container = document.getElementById('searchSuggestions');
            
            if (suggestions.length === 0) {
                hideSuggestions();
                return;
            }
            
            container.innerHTML = suggestions.map(suggestion => `
                <div class="suggestion-item" onclick="selectSuggestion('${suggestion.text}', '${suggestion.type}')">
                    <svg class="suggestion-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        ${getSuggestionIcon(suggestion.type)}
                    </svg>
                    <span class="suggestion-text">${suggestion.text}</span>
                    <span class="suggestion-type">${suggestion.type}</span>
                </div>
            `).join('');
            
            container.classList.remove('hidden');
        }
        
        // Функция для получения иконки подсказки
        function getSuggestionIcon(type) {
            switch(type) {
                case 'тур':
                    return '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>';
                case 'место':
                    return '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>';
                case 'категория':
                    return '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"/>';
                default:
                    return '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>';
            }
        }
        
        // Функция для отображения стандартных подсказок
        function showDefaultSuggestions(query) {
            const defaultSuggestions = [
                { text: 'Памир', type: 'место' },
                { text: 'Искандеркуль', type: 'место' },
                { text: 'Душанбе', type: 'место' },
                { text: 'Горные туры', type: 'категория' },
                { text: 'Трекинг', type: 'категория' },
                { text: 'Культурные туры', type: 'категория' }
            ].filter(s => s.text.toLowerCase().includes(query.toLowerCase()));
            
            if (defaultSuggestions.length > 0) {
                displaySuggestions(defaultSuggestions);
            }
        }
        
        // Функция для выбора подсказки
        function selectSuggestion(text, type) {
            const searchInput = document.getElementById('searchInput');
            searchInput.value = text;
            hideSuggestions();
            
            // Автоматически запускаем поиск
            if (type === 'тур') {
                // Если это тур, переходим к расширенному поиску
                window.location.href = `tours-search.html?query=${encodeURIComponent(text)}`;
            } else {
                // Иначе просто выполняем поиск на текущей странице
                performSearch();
            }
        }
        
        // Функция для показа подсказок
        function showSuggestions() {
            const query = document.getElementById('searchInput').value.trim();
            if (query.length >= 2 && currentSuggestions.length > 0) {
                document.getElementById('searchSuggestions').classList.remove('hidden');
            }
        }
        
        // Функция для скрытия подсказок
        function hideSuggestions() {
            setTimeout(() => {
                document.getElementById('searchSuggestions').classList.add('hidden');
            }, 150); // Небольшая задержка для клика по подсказке
        }

        // Функция для основного поиска
        function performSearch() {
            const searchInput = document.getElementById('searchInput');
            const searchQuery = searchInput.value.trim();
            
            // Собираем параметры фильтров
            const filters = {
                query: searchQuery,
                country: document.getElementById('countryFilter').value,
                city: document.getElementById('cityFilter').value,
                format: document.getElementById('formatFilter').value,
                category: document.getElementById('categoryFilter').value,
                hotel: document.getElementById('hotelFilter').value,
                date: document.getElementById('dateFilter').value
            };
            
            // Убираем пустые значения
            const queryParams = new URLSearchParams();
            Object.entries(filters).forEach(([key, value]) => {
                if (value) {
                    queryParams.append(key, value);
                }
            });
            
            // Переходим на страницу расширенного поиска с параметрами
            window.location.href = `tours-search.html?${queryParams.toString()}`;
        }

        // Функция для поиска по тексту
        async function searchToursByText(query) {
            try {
                const response = await fetch(`${window.location.origin}/api/tours/search?query=${encodeURIComponent(query)}`);
                const result = await response.json();
                
                if (result.success) {
                    displaySearchResults(result.data);
                } else {
                    console.error('Ошибка поиска:', result.error);
                    // Показываем заглушку если API недоступен
                    displayMockSearchResults(query);
                }
            } catch (error) {
                console.error('Ошибка загрузки туров:', error);
                // Показываем заглушку если API недоступен
                displayMockSearchResults(query);
            }
        }

        // Функция для поиска туров по фильтрам
        async function searchTours() {
            try {
                const filters = {
                    country: document.getElementById('countryFilter').value,
                    city: document.getElementById('cityFilter').value,
                    format: document.getElementById('formatFilter').value,
                    category: document.getElementById('categoryFilter').value,
                    hotel: document.getElementById('hotelFilter').value,
                    hotelBrand: document.getElementById('hotelBrandFilter')?.value || '',
                    hotelStars: document.getElementById('hotelStarsFilter')?.value || '',
                    date: document.getElementById('dateFilter').value
                };

                // Убираем пустые фильтры
                const queryParams = new URLSearchParams();
                Object.entries(filters).forEach(([key, value]) => {
                    if (value) {
                        queryParams.append(key, value);
                    }
                });

                const response = await fetch(`${window.location.origin}/api/tours/search?${queryParams}`);
                const result = await response.json();
                
                if (result.success) {
                    displaySearchResults(result.data);
                } else {
                    console.error('Ошибка поиска:', result.error);
                    displayMockSearchResults('');
                }
            } catch (error) {
                console.error('Ошибка загрузки туров:', error);
                displayMockSearchResults('');
            }
        }

        // Функция для отображения демо результатов
        function displayMockSearchResults(query) {
            const mockTours = [
                {
                    title: { ru: 'Памирское шоссе' },
                    description: { ru: 'Захватывающее путешествие по одной из самых высокогорных дорог мира' },
                    country: 'Таджикистан',
                    city: 'Хорог',
                    format: 'Групповой',
                    duration: '7 дней',
                    theme: 'Горные ландшафты',
                    price: 299
                },
                {
                    title: { ru: 'Озеро Искандеркуль' },
                    description: { ru: 'Живописное горное озеро в окружении заснеженных пиков' },
                    country: 'Таджикистан',
                    city: 'Пенджикент',
                    format: 'Персональный',
                    duration: '2 дня',
                    theme: 'Озерные ландшафты',
                    price: 149
                },
                {
                    title: { ru: 'Древний Пенджикент' },
                    description: { ru: 'Исследуйте руины древнего согдийского города' },
                    country: 'Таджикистан',
                    city: 'Пенджикент',
                    format: 'Групповой',
                    duration: '1 день',
                    theme: 'Исторические туры',
                    price: 89
                }
            ];

            displaySearchResults(mockTours);
        }

        // Функция для отображения результатов поиска
        function displaySearchResults(tours) {
            const searchResults = document.getElementById('searchResults');
            const toursGrid = document.getElementById('toursGrid');
            
            if (!tours || tours.length === 0) {
                toursGrid.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <h3 class="text-xl text-gray-600">Туры не найдены</h3>
                        <p class="text-gray-500 mt-2">Попробуйте изменить критерии поиска</p>
                    </div>
                `;
            } else {
                toursGrid.innerHTML = tours.map(tour => createTourCard(tour)).join('');
            }
            
            // Показываем блок результатов и скрываем популярные туры
            searchResults.classList.remove('hidden');
            document.querySelector('section.bg-gray-50').style.display = 'none';
        }

        // Функция для создания карточки тура
        function createTourCard(tour) {
            return `
                <div class="bg-white rounded-lg overflow-hidden shadow-lg hover:shadow-xl transition-shadow flex flex-col">
                    <div class="h-64 bg-gray-200 flex items-center justify-center">
                        <span class="text-white text-lg font-semibold">${tour.country}</span>
                    </div>
                    <div class="p-6 flex flex-col flex-grow">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="text-xl font-bold text-gray-900">${tour.title.ru}</h3>
                            <div class="flex flex-col gap-1">
                                <!-- Тип тура (format/tourType) -->
                                <div class="flex items-center bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium">
                                    ${tour.format || tour.tourType || 'Групповой'}
                                </div>
                                <!-- Категория тура -->
                                ${tour.category ? `
                                <div class="flex items-center px-2 py-1 rounded-full text-xs font-medium" style="background-color: #3E3E3E; color: white;">
                                    ${tour.category.name ? (tour.category.name.ru || tour.category.name.en || 'Категория') : 'Категория'}
                                </div>` : ''}
                            </div>
                        </div>
                        <p class="text-gray-600 mb-4 flex-grow">
                            ${tour.description.ru}
                        </p>
                        <div class="flex justify-between items-center text-sm text-gray-500 mb-4">
                            <span>📍 ${tour.city}</span>
                            <span>⏱️ ${tour.duration}</span>
                            <span>🎯 ${tour.theme}</span>
                        </div>
                        <div class="flex justify-between items-center mt-auto">
                            <span class="text-2xl font-bold" style="color: black;">от $${tour.price}</span>
                            <button class="text-white px-4 py-2 rounded-md hover:opacity-90 transition-colors" style="background-color: #3E3E3E;">
                                Бронировать
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        // Функция для сброса поиска (убрана кнопка сброса из интерфейса)
        function clearSearch() {
            document.getElementById('searchResults').classList.add('hidden');
            document.querySelector('section.bg-gray-50').style.display = 'block';
            
            // Сброс поискового запроса
            document.getElementById('searchInput').value = '';
            
            // Сброс всех фильтров
            document.getElementById('countryFilter').value = '';
            document.getElementById('cityFilter').value = '';
            document.getElementById('formatFilter').value = '';
            document.getElementById('categoryFilter').value = '';
            document.getElementById('hotelFilter').value = '';
            document.getElementById('dateFilter').value = '';
            
            // Скрыть панель фильтров
            document.getElementById('filterPanel').classList.add('hidden');
            
            // Обновляем список городов и отелей
            updateCities();
            updateHotels();
        }

        // Функция для фильтрации по стране из карточек
        function filterByCountry(country) {
            // Устанавливаем фильтр страны
            if (country === 'комбинированный') {
                // Для комбинированного тура ищем туры с несколькими странами или специальной тематикой
                document.getElementById('themeFilter').value = 'Комбинированный тур по Центральной Азии';
                document.getElementById('countryFilter').value = '';
            } else {
                document.getElementById('countryFilter').value = country;
                document.getElementById('themeFilter').value = '';
            }
            
            // Обновляем города и отели для выбранной страны
            updateCities();
            updateHotels();
            updateHotelFilters();
            
            // Выполняем поиск
            searchTours();
            
            // Прокручиваем к результатам
            setTimeout(() => {
                const searchResults = document.getElementById('searchResults');
                if (searchResults && !searchResults.classList.contains('hidden')) {
                    searchResults.scrollIntoView({ behavior: 'smooth' });
                }
            }, 500);
        }

        // Загрузка всех туров при загрузке страницы
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Страница загружена с тёмно-серым фильтром');
            
            // Настройка календаря с минимальной датой
            const dateFilter = document.getElementById('dateFilter');
            if (dateFilter) {
                const today = new Date();
                const tomorrow = new Date(today);
                tomorrow.setDate(tomorrow.getDate() + 1);
                const minDate = tomorrow.toISOString().split('T')[0];
                dateFilter.min = minDate;
                console.log('Минимальная дата установлена:', minDate);
            }


            
            // Карта туров с их именами и ключами
            const tourMap = {
                'Полный день: Памирское шоссе, горы и озёра': 'pamir_highway',
                'Треккинг к озёрам семи цветов': 'pamir_highway',
                'Культурный тур по столице Таджикистана': 'pamir_highway',
                'Приключение в Бадахшане и горячие источники': 'pamir_highway',
                'Древний Самарканд и мавзолей Гур-Эмир': 'samarkand',
                'Священная Бухара: мечети и медресе': 'samarkand',
                'Хива: музей под открытым небом': 'samarkand',
                'Ташкент: современность и традиции': 'samarkand',
                'Иссык-Куль и ущелье Джеты-Огуз': 'issyk_kul',
                'Столица Киргизстана и Ала-Арча': 'issyk_kul',
                'Высокогорные пастбища и юрты': 'issyk_kul',
                'Озеро Сон-Куль и кочевые традиции': 'issyk_kul',
                'Врата ада: газовый кратер Дарваза': 'darvaza',
                'Мраморная столица пустыни Каракумы': 'darvaza',
                'Древний Мерв и археологические памятники': 'darvaza',
                'Конные прогулки по пустыне': 'darvaza'
            };

            // Находим все карточки туров
            const tourCards = document.querySelectorAll('.group.cursor-pointer');
            
            tourCards.forEach(card => {
                const titleElement = card.querySelector('h3');
                const button = card.querySelector('button[style*="background-color: #3E3E3E"]');
                
                if (titleElement && button) {
                    const tourTitle = titleElement.textContent.trim();
                    const tourKey = tourMap[tourTitle] || 'pamir_highway';
                    
                    // Добавляем клик на кнопку "Бронировать"
                    button.addEventListener('click', function(e) {
                        e.stopPropagation();
                        window.open(`tour-template.html?tour=${tourKey}`, '_blank');
                    });
                    
                    // Добавляем клик на всю карточку
                    card.addEventListener('click', function() {
                        window.open(`tour-template.html?tour=${tourKey}`, '_blank');
                    });
                }
            });
            
            // Закрытие выпадающего списка при клике вне его
            document.addEventListener('click', function(event) {
                const dropdown = document.getElementById('langDropdown');
                const button = document.querySelector('.lang-selector-btn');
                if (!button.contains(event.target) && !dropdown.contains(event.target)) {
                    dropdown.classList.remove('show');
                    document.querySelector('.dropdown-arrow').classList.remove('open');
                }
            });
        });
        
        // ✨ Функции слайдшоу изображений для карточек туров
        const tourSlideshows = new Map(); // Хранит интервалы для каждого тура
        
        function startImageSlideshow(tourId) {
            // Проверяем есть ли изображения для слайдшоу
            const images = document.querySelectorAll(`img[data-tour-id="${tourId}"]`);
            if (images.length <= 1) return; // Если одно изображение или меньше - не запускаем слайдшоу
            
            let currentIndex = 0;
            
            // Запускаем слайдшоу с интервалом 1.5 секунды
            const interval = setInterval(() => {
                // Скрываем текущее изображение
                images[currentIndex].style.opacity = '0';
                
                // Обновляем индикатор
                const currentDot = document.querySelector(`div[data-tour-id="${tourId}"][data-slide-index="${currentIndex}"]`);
                if (currentDot) {
                    currentDot.style.opacity = '0.5';
                }
                
                // Переходим к следующему изображению
                currentIndex = (currentIndex + 1) % images.length;
                
                // Показываем следующее изображение
                images[currentIndex].style.opacity = '1';
                
                // Обновляем индикатор
                const nextDot = document.querySelector(`div[data-tour-id="${tourId}"][data-slide-index="${currentIndex}"]`);
                if (nextDot) {
                    nextDot.style.opacity = '1';
                }
            }, 1500); // Меняем изображение каждые 1.5 секунды
            
            // Сохраняем интервал для остановки при убирании курсора
            tourSlideshows.set(tourId, { interval, currentIndex });
        }
        
        function stopImageSlideshow(tourId) {
            const slideshow = tourSlideshows.get(tourId);
            if (slideshow) {
                clearInterval(slideshow.interval);
                tourSlideshows.delete(tourId);
                
                // Возвращаем к первому изображению
                const images = document.querySelectorAll(`img[data-tour-id="${tourId}"]`);
                const dots = document.querySelectorAll(`div[data-tour-id="${tourId}"]`);
                
                images.forEach((img, index) => {
                    img.style.opacity = index === 0 ? '1' : '0';
                });
                
                dots.forEach((dot, index) => {
                    dot.style.opacity = index === 0 ? '1' : '0.5';
                });
            }
        }

        // Функции для языкового селектора
        function toggleLanguageDropdown() {
            const dropdown = document.getElementById('langDropdown');
            const arrow = document.querySelector('.dropdown-arrow');
            dropdown.classList.toggle('show');
            arrow.classList.toggle('open');
        }
        
        function selectLanguage(lang, flagClass, name) {
            // Обновляем кнопку селектора
            const selectedFlag = document.querySelector('.selected-flag');
            selectedFlag.className = `selected-flag ${flagClass}`;
            document.querySelector('.selected-lang').textContent = name;
            
            // Убираем активный класс со всех опций
            document.querySelectorAll('#langDropdown .lang-option').forEach(opt => opt.classList.remove('active'));
            
            // Добавляем активный класс к выбранной опции
            document.querySelector(`[data-lang="${lang}"]`).classList.add('active');
            
            // Закрываем выпадающий список
            document.getElementById('langDropdown').classList.remove('show');
            
            console.log(`Переключен язык: ${lang}`);
            
            // Закрываем dropdown  
            toggleLanguageDropdown();
        }


        // Отель availability checker
        function checkHotelAvailability() {
            const modal = document.getElementById('hotelAvailabilityModal');
            if (modal) {
                modal.style.display = 'block';
            }
        }

        function closeHotelModal() {
            const modal = document.getElementById('hotelAvailabilityModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }

        function performHotelSearch() {
            const checkIn = document.getElementById('checkInDate').value;
            const checkOut = document.getElementById('checkOutDate').value;
            const guests = document.getElementById('guestCount').value;
            
            if (!checkIn || !checkOut) {
                alert('Пожалуйста, выберите даты заезда и выезда');
                return;
            }
            
            // Симуляция поиска отелей
            alert(`Поиск отелей:\nЗаезд: ${checkIn}\nВыезд: ${checkOut}\nГостей: ${guests}\n\nФункция будет доступна в ближайшее время.`);
        }

        // Leaflet Maps initialization  
        function initMap() {
            // Координаты офиса Бунёд-Тур: ул. Садриддина Айни, 104, Душанбе, Таджикистан
            const bunyodTourLocation = [38.559772, 68.787038];
            
            // Создание карты
            const map = L.map('map').setView(bunyodTourLocation, 15);
            
            // Добавление карты OSM
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 19,
                attribution: '© OpenStreetMap contributors'
            }).addTo(map);
            
            // Создание кастомной иконки маркера
            const customIcon = L.divIcon({
                html: `<div style="
                    width: 40px; 
                    height: 40px; 
                    border-radius: 50%; 
                    background-color: #3E3E3E; 
                    border: 3px solid #fff; 
                    display: flex; 
                    align-items: center; 
                    justify-content: center; 
                    color: white; 
                    font-weight: bold; 
                    font-size: 12px;
                    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
                    transform: translate(-50%, -100%);
                ">BT</div>`,
                className: 'custom-div-icon',
                iconSize: [40, 40],
                iconAnchor: [20, 40]
            });
            
            // Создание маркера
            const marker = L.marker(bunyodTourLocation, {
                icon: customIcon,
                title: "Бунёд-Тур - Туристическое агентство"
            }).addTo(map);
            
            // Создание popup окна
            const popupContent = `
                <div style="font-family: Arial, sans-serif; min-width: 200px;">
                    <h3 style="margin: 0 0 8px 0; color: #3E3E3E; font-size: 16px;">🏢 Бунёд-Тур</h3>
                    <p style="margin: 0 0 5px 0; color: #666; font-size: 14px;">
                        <strong>📍 Адрес:</strong> ул. Садриддина Айни, 104, Душанбе
                    </p>
                    <p style="margin: 0 0 5px 0; color: #666; font-size: 14px;">
                        <strong>📞 Телефон:</strong> +992 44 625 7575
                    </p>
                    <p style="margin: 0; color: #666; font-size: 14px;">
                        <strong>✉️ Email:</strong> info@bunyodtour.tj
                    </p>
                </div>
            `;
            
            marker.bindPopup(popupContent).openPopup();
        }

        // Initialize map when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Wait for page to fully load, then initialize map
            setTimeout(initMap, 500);
        });

        // API Configuration
        const API_BASE_URL = window.location.origin + '/api';
        
        // Tour loading functions
        async function loadTourBlocks() {
            try {
                const response = await fetch(`${API_BASE_URL}/tour-blocks`);
                const result = await response.json();
                
                if (result.success) {
                    // Сортируем блоки по sortOrder для правильного порядка отображения
                    const sortedBlocks = result.data.sort((a, b) => a.sortOrder - b.sortOrder);
                    
                    for (const block of sortedBlocks) {
                        await loadToursForBlock(block);
                    }
                }
            } catch (error) {
                console.error('Error loading tour blocks:', error);
            }
        }
        
        async function loadToursForBlock(block) {
            try {
                const response = await fetch(`${API_BASE_URL}/tour-blocks/${block.id}/tours`);
                const result = await response.json();
                
                console.log(`Loading tours for block ${block.id}:`, result);
                
                if (result.success && result.data.length > 0) {
                    renderTourBlock(block, result.data);
                } else {
                    console.log(`No tours found for block ${block.id}`);
                }
            } catch (error) {
                console.error(`Error loading tours for block ${block.id}:`, error);
            }
        }
        
        function renderTourBlock(block, tours) {
            const blockTitle = block.title;
            const blockId = `tour-block-${block.id}`;
            const carouselId = `carousel-${block.id}`;
            
            // Найдем контейнер для динамических блоков туров
            const tourBlocksContainer = document.getElementById('tour-blocks-container');
            
            if (!tourBlocksContainer) {
                console.error('Tour blocks container not found');
                return;
            }
            
            // Найдем существующую секцию или создадим новую
            let existingSection = document.getElementById(blockId);
            
            if (!existingSection) {
                // Создаем новую секцию в контейнере
                existingSection = document.createElement('section');
                existingSection.id = blockId;
                existingSection.className = 'py-16 bg-white';
                
                // Добавляем блоки в порядке поступления (уже отсортированы в loadTourBlocks)
                // Просто добавляем в конец контейнера
                
                // Добавляем блок в конец (блоки уже приходят в правильном порядке)
                tourBlocksContainer.appendChild(existingSection);
            }
            
            if (existingSection) {
                existingSection.innerHTML = `
                    <div class="max-w-7xl mx-auto px-6">
                        <h2 class="text-3xl font-bold text-center mb-12 text-gray-900">
                            ${blockTitle.ru}
                        </h2>
                        
                        <div class="tour-block-container">
                            <button class="carousel-button prev" onclick="scrollCarousel('${carouselId}', -1)" id="prev-${carouselId}">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                                </svg>
                            </button>
                            
                            <div class="tour-carousel" id="${carouselId}" onscroll="updateCarouselButtons('${carouselId}')">
                                ${tours.map(tour => renderTourCard(tour)).join('')}
                            </div>
                            
                            <button class="carousel-button next" onclick="scrollCarousel('${carouselId}', 1)" id="next-${carouselId}">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                `;
                
                // Initialize carousel buttons state  
                setTimeout(() => {
                    updateCarouselButtons(carouselId);
                    toggleCarouselButtons(carouselId, tours.length);
                }, 100);
            }
        }
        
        function renderTourCard(tour) {
            const title = tour.title;
            const description = tour.description;
            const shortDesc = tour.shortDesc || null;
            
            // Создаем массив изображений для слайд-эффекта
            const tourImages = [];
            
            // Добавляем основное изображение
            if (tour.hasImages || tour.images || tour.mainImage) {
                tourImages.push(`/api/tours/${tour.id}/main-image`);
                
                // Добавляем дополнительные изображения (если есть)
                if (tour.images && Array.isArray(tour.images)) {
                    tour.images.forEach((img, index) => {
                        if (index > 0) { // Пропускаем первое, так как это main-image
                            tourImages.push(`/api/tours/${tour.id}/image/${index}`);
                        }
                    });
                } else {
                    // Добавляем несколько копий для демонстрации слайд-эффекта
                    for (let i = 1; i <= 3; i++) {
                        tourImages.push(`/api/tours/${tour.id}/main-image`);
                    }
                }
            }
            
            return `
                <div class="tour-card group cursor-pointer bg-white rounded-lg shadow-md hover:shadow-lg transition-all flex flex-col h-full"
                     onclick="window.location.href='tour-template.html?tour=${tour.id || 1}'"
                     onmouseenter="startImageSlideshow(${tour.id})"
                     onmouseleave="stopImageSlideshow(${tour.id})"
                     data-tour-id="${tour.id}">
                    <div class="relative overflow-hidden rounded-t-lg">
                        <div class="w-full h-48 bg-gradient-to-br from-blue-100 to-blue-200 flex items-center justify-center" id="tour-image-container-${tour.id}">
                            ${tourImages.length > 0 ? 
                                tourImages.map((imgSrc, index) => `
                                    <img src="${imgSrc}" 
                                         alt="${title.ru || title}" 
                                         class="tour-slide-image w-full h-full object-cover absolute inset-0 transition-opacity duration-500 ${index === 0 ? 'opacity-100' : 'opacity-0'}" 
                                         data-slide-index="${index}"
                                         data-tour-id="${tour.id}"
                                         onerror="this.style.display='none';">
                                `).join('') :
                                `<div class="text-center p-4">
                                    <svg class="w-12 h-12 mx-auto text-blue-400 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 11a3 3 0 11-6 0 3 3 0 616 0z"/>
                                    </svg>
                                    <div class="text-sm font-medium text-blue-600">${(title && typeof title === 'object' && title.ru) ? title.ru : (typeof title === 'string' ? title : 'Название тура')}</div>
                                </div>`
                            }
                        </div>
                        <button class="absolute top-4 right-4 w-8 h-8 bg-white rounded-full flex items-center justify-center hover:bg-gray-100">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                            </svg>
                        </button>
                        ${tourImages.length > 1 ? `
                        <div class="absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-1">
                            ${tourImages.map((_, index) => `
                                <div class="w-2 h-2 rounded-full bg-white opacity-50 tour-slide-dot" 
                                     data-tour-id="${tour.id}" 
                                     data-slide-index="${index}"
                                     ${index === 0 ? 'style="opacity: 1;"' : ''}></div>
                            `).join('')}
                        </div>` : ''}
                    </div>
                    <div class="p-4 flex flex-col flex-grow">
                        <div class="text-xs text-gray-500 mb-1 flex items-center">
                            <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" />
                            </svg>
                            ${tour.city}, ${tour.country}
                        </div>
                        <!-- Тип тура (обязательно показываем) -->
                        <div class="flex items-center text-blue-600 text-xs mb-2">
                            <span class="mr-1">🟢</span>
                            <span class="font-medium">${tour.format || tour.tourType || 'Групповой'}</span>
                        </div>
                        <!-- Категория тура (обязательно показываем) -->
                        <div class="flex items-center text-xs mb-2" style="color: #3E3E3E;">
                            <span class="mr-1">🏷️</span>
                            <span class="font-medium">${tour.category && tour.category.name ? (tour.category.name.ru || tour.category.name.en || 'Категория') : 'Категория'}</span>
                        </div>
                        ${tour.rating ? `
                        <div class="flex items-center text-green-600 text-xs mb-2">
                            <span class="mr-1">★</span>
                            <span class="font-semibold">${tour.rating}</span>
                            <span class="text-gray-500 ml-1">(${tour.reviewsCount || 0})</span>
                        </div>` : ''}
                        <h3 class="text-lg font-semibold text-gray-900 mb-2 group-hover:text-blue-600 flex-grow">
                            ${(shortDesc && typeof shortDesc === 'object' && shortDesc.ru) ? shortDesc.ru : (title && typeof title === 'object' && title.ru) ? title.ru : (typeof title === 'string' ? title : 'Название тура')}
                        </h3>
                        <div class="flex items-center justify-between mt-auto">
                            <div>
                                ${tour.originalPrice ? `
                                    <div class="text-sm line-through text-gray-400 mb-1 price-display" data-original-price="${tour.originalPrice}">${tour.originalPrice} TJS</div>
                                ` : ''}
                                <div class="text-lg font-bold text-gray-900 tour-price price-display" data-original-price="${tour.price}">${tour.price} TJS</div>
                                <div class="converted-price text-sm text-gray-600 mt-1" style="display: none;"></div>
                                <div class="text-xs text-gray-500 mt-1">${tour.priceType}</div>
                            </div>
                            <button class="hover:opacity-90 text-white px-4 py-2 rounded-lg text-sm font-semibold transition-colors" 
                                    style="background-color: #3E3E3E;"
                                    onclick="event.stopPropagation(); window.location.href='tour-template.html?id=${tour.id}'">
                                Бронировать
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // Carousel Navigation Functions
        function scrollCarousel(carouselId, direction) {
            const carousel = document.getElementById(carouselId);
            if (!carousel) return;
            
            const cardWidth = 280 + 24; // card width + gap
            const scrollAmount = cardWidth * 3; // scroll 3 cards at a time
            
            carousel.scrollBy({
                left: direction * scrollAmount,
                behavior: 'smooth'
            });
        }
        
        function toggleCarouselButtons(carouselId, totalTours) {
            const prevBtn = document.getElementById(`prev-${carouselId}`);
            const nextBtn = document.getElementById(`next-${carouselId}`);
            
            if (!prevBtn || !nextBtn) return;
            
            // Show buttons only if there are more than 4 tours
            const showButtons = totalTours > 4;
            prevBtn.style.display = showButtons ? 'flex' : 'none';
            nextBtn.style.display = showButtons ? 'flex' : 'none';
        }
        
        function updateCarouselButtons(carouselId) {
            const carousel = document.getElementById(carouselId);
            const prevBtn = document.getElementById(`prev-${carouselId}`);
            const nextBtn = document.getElementById(`next-${carouselId}`);
            
            if (!carousel || !prevBtn || !nextBtn) return;
            
            const scrollLeft = carousel.scrollLeft;
            const maxScroll = carousel.scrollWidth - carousel.clientWidth;
            
            // Update previous button
            if (scrollLeft <= 10) {
                prevBtn.disabled = true;
                prevBtn.style.opacity = '0.5';
            } else {
                prevBtn.disabled = false;
                prevBtn.style.opacity = '1';
            }
            
            // Update next button
            if (scrollLeft >= maxScroll - 10) {
                nextBtn.disabled = true;
                nextBtn.style.opacity = '0.5';
            } else {
                nextBtn.disabled = false;
                nextBtn.style.opacity = '1';
            }
        }
        
        // Hero Slider Functions
        let currentSlideIndex = 0;
        let slides = [];
        let slideInterval;

        async function loadSlides() {
            try {
                const response = await fetch(`${window.location.origin}/api/slides`);
                const data = await response.json();
                
                if (data.success && data.data && data.data.length > 0) {
                    slides = data.data;
                    renderSlides();
                    initializeSlider();
                } else {
                    console.log('No slides found, using default content');
                }
            } catch (error) {
                console.error('Error loading slides:', error);
            }
        }

        function renderSlides() {
            const container = document.getElementById('slidesContainer');
            const navigation = document.getElementById('sliderNavigation');
            
            if (!container || !navigation) return;

            // Создаем слайды
            container.innerHTML = slides.map((slide, index) => {
                const title = JSON.parse(slide.title || '{}');
                const description = JSON.parse(slide.description || '{}');
                const buttonText = slide.buttonText ? JSON.parse(slide.buttonText) : null;
                
                return `
                    <div class="hero-slide ${index === 0 ? 'active' : ''}" data-slide="${index}"
                         style="background-image: url('${slide.image || ''}'); ${!slide.image ? 'background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);' : ''}">
                        <div class="gradient-overlay absolute inset-0"></div>
                        <div class="relative z-10 text-center max-w-4xl mx-auto px-6 flex items-center justify-center h-full">
                            <div>
                                <h1 class="text-6xl font-bold mb-6 text-white">
                                    ${title.ru || title.en || 'Откройте красоту Таджикистана'}
                                </h1>
                                <p class="text-xl mb-8 max-w-2xl mx-auto text-white">
                                    ${description.ru || description.en || 'Исследуйте захватывающие горы Памира, древние города Шёлкового пути и богатую культуру этой удивительной страны'}
                                </p>
                                ${slide.link && buttonText ? `
                                    <a href="${slide.link}" class="inline-block bg-white text-gray-800 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors">
                                        ${buttonText.ru || buttonText.en || 'Узнать больше'}
                                    </a>
                                ` : ''}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            // Создаем точки навигации
            navigation.innerHTML = slides.map((_, index) => 
                `<div class="slider-dot ${index === 0 ? 'active' : ''}" onclick="goToSlide(${index})"></div>`
            ).join('');

            // Показываем кнопки навигации если больше одного слайда
            const prevBtn = document.getElementById('prevSlide');
            const nextBtn = document.getElementById('nextSlide');
            if (slides.length > 1) {
                prevBtn.style.display = 'block';
                nextBtn.style.display = 'block';
            }
        }

        function initializeSlider() {
            if (slides.length <= 1) return;

            // Автопрокрутка слайдов
            slideInterval = setInterval(() => {
                nextSlide();
            }, 5000);

            // Обработчики кнопок
            document.getElementById('prevSlide').onclick = prevSlide;
            document.getElementById('nextSlide').onclick = nextSlide;
        }

        function goToSlide(index) {
            if (index === currentSlideIndex) return;

            const slides = document.querySelectorAll('.hero-slide');
            const dots = document.querySelectorAll('.slider-dot');

            // Скрываем текущий слайд
            slides[currentSlideIndex].classList.remove('active');
            dots[currentSlideIndex].classList.remove('active');

            // Показываем новый слайд
            currentSlideIndex = index;
            slides[currentSlideIndex].classList.add('active');
            dots[currentSlideIndex].classList.add('active');

            // Перезапускаем автопрокрутку
            clearInterval(slideInterval);
            if (slides.length > 1) {
                slideInterval = setInterval(() => {
                    nextSlide();
                }, 5000);
            }
        }

        function nextSlide() {
            const nextIndex = (currentSlideIndex + 1) % slides.length;
            goToSlide(nextIndex);
        }

        function prevSlide() {
            const prevIndex = (currentSlideIndex - 1 + slides.length) % slides.length;
            goToSlide(prevIndex);
        }

        // Загружаем туры и слайды при загрузке страницы
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('DOM loaded, initializing...');
            
            // Сначала загружаем страны и города для фильтров
            await loadCountriesAndCities();
            
            loadTourBlocks();
            loadSlides();
            initializeCurrency();
            
            // Инициализируем все обработчики событий
            initializeEventHandlers();
        });

        function formatImageUrl(imageUrl) {
            if (!imageUrl) return '';
            
            if (imageUrl.startsWith('/objects/')) {
                // Object storage path - construct full URL
                return `${window.location.origin}${imageUrl}`;
            } else if (imageUrl.startsWith('http')) {
                // Full URL - use as is
                return imageUrl;
            } else {
                // Relative path - make it absolute
                return `${window.location.origin}/${imageUrl}`;
            }
        }

        // Глобальная система валют
        let globalCurrency = 'TJS';
        let exchangeRates = {
            TJS: { rate: 1, symbol: 'SM' },
            USD: { rate: 0.091, symbol: '$' },
            EUR: { rate: 0.084, symbol: '€' },
            RUB: { rate: 0.11, symbol: '₽' }
        };

        // Функции переключения валют
        function toggleCurrencyDropdown() {
            const dropdown = document.getElementById('currencyDropdown');
            dropdown.classList.toggle('show');
            
            // Закрываем языковой dropdown если открыт
            const langDropdown = document.getElementById('langDropdown');
            if (langDropdown.classList.contains('show')) {
                langDropdown.classList.remove('show');
            }
        }

        function selectCurrency(currency, symbol) {
            globalCurrency = currency;
            
            // Обновляем кнопку селектора
            document.querySelector('.selected-currency').textContent = currency;
            
            // Обновляем активный элемент в dropdown
            document.querySelectorAll('#currencyDropdown .lang-option').forEach(option => {
                option.classList.remove('active');
            });
            document.querySelector(`[data-currency="${currency}"]`).classList.add('active');
            
            // Скрываем dropdown
            document.getElementById('currencyDropdown').classList.remove('show');
            
            // Сохраняем в localStorage
            localStorage.setItem('selectedCurrency', currency);
            
            // Конвертируем все цены на странице
            convertAllPrices();
        }

        // Функция конвертации цен
        function convertPrice(priceInTJS, targetCurrency) {
            if (!exchangeRates[targetCurrency]) return priceInTJS;
            return Math.round(priceInTJS * exchangeRates[targetCurrency].rate);
        }

        function convertAllPrices() {
            // Конвертируем цены в карточках туров
            document.querySelectorAll('.tour-card').forEach(card => {
                const priceElement = card.querySelector('.tour-price');
                const convertedPriceElement = card.querySelector('.converted-price');
                
                if (priceElement && priceElement.dataset.originalPrice) {
                    const originalPrice = parseInt(priceElement.dataset.originalPrice);
                    
                    // Основная цена всегда в TJS
                    priceElement.textContent = `${originalPrice} TJS`;
                    
                    if (convertedPriceElement) {
                        if (globalCurrency === 'TJS') {
                            // Скрываем конвертированную цену если TJS выбран
                            convertedPriceElement.style.display = 'none';
                        } else {
                            // Показываем конвертированную цену под основной
                            const convertedPrice = convertPrice(originalPrice, globalCurrency);
                            convertedPriceElement.textContent = `(${convertedPrice} ${globalCurrency})`;
                            convertedPriceElement.style.display = 'block';
                        }
                    }
                }
            });
            
            // Конвертируем другие цены на странице
            document.querySelectorAll('.price-display').forEach(element => {
                if (element.dataset.originalPrice) {
                    const originalPrice = parseInt(element.dataset.originalPrice);
                    if (globalCurrency === 'TJS') {
                        element.textContent = `${originalPrice} TJS`;
                    } else {
                        const convertedPrice = convertPrice(originalPrice, globalCurrency);
                        element.textContent = `${originalPrice} TJS (${convertedPrice} ${globalCurrency})`;
                    }
                }
            });
        }

        // Загрузка курсов валют с сервера
        async function loadExchangeRates() {
            try {
                const response = await fetch('/api/exchange-rates');
                const data = await response.json();
                
                if (data.success) {
                    data.data.forEach(rate => {
                        exchangeRates[rate.currency] = {
                            rate: parseFloat(rate.rate),
                            symbol: rate.symbol
                        };
                    });
                    
                    // Применяем конвертацию после загрузки курсов
                    convertAllPrices();
                }
            } catch (error) {
                console.error('Ошибка загрузки курсов валют:', error);
            }
        }

        // Инициализация валютной системы
        function initializeCurrency() {
            // Устанавливаем TJS как основную валюту по умолчанию
            globalCurrency = 'TJS';
            
            // Восстанавливаем выбранную валюту из localStorage только если это не первый визит
            const savedCurrency = localStorage.getItem('selectedCurrency');
            if (savedCurrency && exchangeRates[savedCurrency] && savedCurrency !== 'TJS') {
                globalCurrency = savedCurrency;
                document.querySelector('.selected-currency').textContent = savedCurrency;
                document.querySelectorAll('#currencyDropdown .lang-option').forEach(option => {
                    option.classList.remove('active');
                });
                document.querySelector(`[data-currency="${savedCurrency}"]`)?.classList.add('active');
            } else {
                // Убеждаемся что TJS активен по умолчанию
                document.querySelector('.selected-currency').textContent = 'TJS';
                document.querySelectorAll('#currencyDropdown .lang-option').forEach(option => {
                    option.classList.remove('active');
                });
                document.querySelector(`[data-currency="TJS"]`)?.classList.add('active');
                localStorage.setItem('selectedCurrency', 'TJS');
            }
            
            // Загружаем актуальные курсы валют
            loadExchangeRates();
            
            // Обновляем отображение цен
            convertAllPrices();
        }


        // Закрытие dropdown при клике вне их
        document.addEventListener('click', function(event) {
            const langDropdown = document.getElementById('languageDropdown');
            const currencyDropdown = document.getElementById('currencyDropdown');
            
            // Закрываем языковой dropdown
            if (langDropdown && !event.target.closest('.language-dropdown')) {
                langDropdown.classList.remove('show');
            }
            
            // Закрываем валютный dropdown
            if (currencyDropdown && !event.target.closest('.language-dropdown')) {
                currencyDropdown.classList.remove('show');
            }
        });

        // Функция инициализации всех обработчиков событий
        function initializeEventHandlers() {
            console.log('Initializing event handlers...');
            
            // Обработчики для валютного селектора  
            const currencyButton = document.querySelector('button[onclick="toggleCurrencyDropdown()"]');
            if (currencyButton) {
                // Убираем onclick атрибут и добавляем event listener
                currencyButton.removeAttribute('onclick');
                currencyButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('Currency button clicked');
                    toggleCurrencyDropdown();
                });
                console.log('Currency button handler added');
            }
            
            // Обработчики для опций валют
            document.querySelectorAll('#currencyDropdown .lang-option').forEach(option => {
                option.removeAttribute('onclick');
                option.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    const currency = this.getAttribute('data-currency');
                    console.log('Currency selected:', currency);
                    selectCurrency(currency, currency);
                });
            });
            
            // Обработчики для языкового селектора
            const langButton = document.querySelector('button[onclick="toggleLanguageDropdown()"]');
            if (langButton) {
                langButton.removeAttribute('onclick');
                langButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('Language button clicked');
                    toggleLanguageDropdown();
                });
            }
            
            // Обработчики для опций языков
            document.querySelectorAll('#langDropdown .lang-option').forEach(option => {
                option.removeAttribute('onclick');
                option.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    const lang = this.getAttribute('data-lang');
                    const flag = this.querySelector('.flag').className.split(' ')[1];
                    const name = this.querySelector('.lang-name').textContent;
                    console.log('Language selected:', lang);
                    selectLanguage(lang, flag, name);
                });
            });
            
            // Поиск туров
            const searchButton = document.querySelector('button[onclick="searchTours()"]');
            if (searchButton) {
                searchButton.removeAttribute('onclick');
                searchButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('Search button clicked');
                    searchTours();
                });
            }
            
            // Кнопка "Больше с Bunyod-Tour"
            const ctaButton = document.querySelector('.cta-button');
            if (ctaButton) {
                ctaButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('CTA button clicked');
                    // Прокрутка к турам
                    document.querySelector('#main-content')?.scrollIntoView({ behavior: 'smooth' });
                });
            }
            
            console.log('All event handlers initialized');
        }
    </script>
</body>
</html>