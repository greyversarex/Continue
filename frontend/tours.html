<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-translate="tours.page_title">–ü–æ–∏—Å–∫ —Ç—É—Ä–æ–≤ - Bunyod-Tour</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- üåê –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–ï –¶–ï–ù–¢–†–ê–õ–¨–ù–û–ô –°–ò–°–¢–ï–ú–´ i18n -->
    <script src="/public/js/i18n.js"></script>
    <script src="/public/js/layout-loader.js"></script>
    <style>
        /* Dropdown styles from main page */
        .dropdown {
            position: relative;
            display: inline-block;
        }
        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #2F2F2F;
            min-width: 160px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.3);
            z-index: 1000;
            border-radius: 8px;
            padding: 8px 0;
            top: 100%;
            left: 0;
        }
        .dropdown:hover .dropdown-content {
            display: block;
        }
        .dropdown-content a {
            color: white;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        .dropdown-content a:hover {
            background-color: #4A4A4A;
        }
        .dropdown-content .dropdown-submenu {
            position: relative;
        }
        .dropdown-content .dropdown-submenu .dropdown-subcontent {
            display: none !important;
            position: absolute;
            left: 100%;
            top: 0;
            background-color: #2F2F2F;
            min-width: 180px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.3);
            border-radius: 8px;
            padding: 8px 0;
            z-index: 1001;
        }
        .dropdown-content .dropdown-submenu:hover > .dropdown-subcontent {
            display: block !important;
        }

        /* Language selector styles */
        .language-dropdown {
            position: relative;
        }
        .lang-selector-btn {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 6px;
            color: white;
            padding: 8px 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        .lang-selector-btn:hover {
            background: rgba(255,255,255,0.2);
        }
        .lang-dropdown-content {
            display: none;
            position: absolute;
            right: 0;
            top: 100%;
            background-color: #2F2F2F;
            min-width: 200px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.3);
            border-radius: 8px;
            padding: 8px 0;
            z-index: 1000;
            margin-top: 4px;
        }
        .lang-dropdown-content.show {
            display: block;
        }
        .lang-option {
            color: white;
            padding: 10px 16px;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
            transition: background-color 0.3s;
            cursor: pointer;
        }
        .lang-option:hover {
            background-color: #4A4A4A;
        }
        .lang-option.active {
            background-color: #4A4A4A;
        }

        /* Flag styles */
        .flag {
            width: 20px;
            height: 15px;
            background-size: cover;
            border-radius: 2px;
            display: inline-block;
        }
        .flag-ru { background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTAwIiBoZWlnaHQ9IjYwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjkwMCIgaGVpZ2h0PSI2MDAiIGZpbGw9IiNmZmYiLz4KPHJlY3Qgd2lkdGg9IjkwMCIgaGVpZ2h0PSIyMDAiIGZpbGw9IiMwMDUyYjQiLz4KPHJlY3Qgd2lkdGg9IjkwMCIgaGVpZ2h0PSIyMDAiIHk9IjQwMCIgZmlsbD0iI2QxMjczOSIvPgo8L3N2Zz4='); }
        .flag-us { background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNzQxIiBoZWlnaHQ9IjM5MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9Ijc0MSIgaGVpZ2h0PSIzOTAiIGZpbGw9IiNiMjIyMzQiLz4KPHBhdGggZD0ibTAsMzBIMzYwVjBINDBINzQxdjMwSDBabTcxMCwwSDBWNjBINzQxVjMwWm0wLDYwSDBWMTIwSDc0MVY5MFptMCw2MEgwVjE4MEg3NDFWMTUwWm0wLDYwSDBWMjQwSDc0MVYyMTBabTAsNjBIMFYzMDBINzQxVjI3MFptMCw2MEgwVjM2MEg3NDFWMzMwWm0wLDYwSDBWMzkwSDc0MVYzNjAiIGZpbGw9IiNmZmYiLz4KPHJlY3Qgd2lkdGg9IjI5NiIgaGVpZ2h0PSIyMTAiIGZpbGw9IiMzYzNiNmUiLz4KPC9zdmc+'); }
        .flag-tj { background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTAwIiBoZWlnaHQ9IjQ1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjkwMCIgaGVpZ2h0PSI0NTAiIGZpbGw9IiNkYzE0M2MiLz4KPHJlY3Qgd2lkdGg9IjkwMCIgaGVpZ2h0PSIzMDAiIGZpbGw9IiNmZmYiLz4KPHJlY3Qgd2lkdGg9IjkwMCIgaGVpZ2h0PSIxNTAiIHk9IjMwMCIgZmlsbD0iIzAwNjIzMCIvPgo8L3N2Zz4='); }
        .flag-ir { background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTAwIiBoZWlnaHQ9IjU0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjkwMCIgaGVpZ2h0PSI1NDAiIGZpbGw9IiNkYTE0MzQiLz4KPHJlY3Qgd2lkdGg9IjkwMCIgaGVpZ2h0PSIzNjAiIGZpbGw9IiNmZmYiLz4KPHJlY3Qgd2lkdGg9IjkwMCIgaGVpZ2h0PSIxODAiIHk9IjM2MCIgZmlsbD0iIzJkNmEzNyIvPgo8L3N2Zz4='); }
        .flag-de { background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTAwIiBoZWlnaHQ9IjU0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjkwMCIgaGVpZ2h0PSI1NDAiIGZpbGw9IiNmZmNlMDAiLz4KPHJlY3Qgd2lkdGg9IjkwMCIgaGVpZ2h0PSIzNjAiIGZpbGw9IiNkZDBiMTIiLz4KPHJlY3Qgd2lkdGg9IjkwMCIgaGVpZ2h0PSIxODAiIGZpbGw9IiMwMDAiLz4KPC9zdmc+'); }
        .flag-cn { background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTAwIiBoZWlnaHQ9IjYwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjkwMCIgaGVpZ2h0PSI2MDAiIGZpbGw9IiNkZTE5MzUiLz4KPC9zdmc+'); }

        .filter-section {
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
        }
        .filter-title {
            font-weight: 600;
            margin-bottom: 12px;
            color: #374151;
        }
        .checkbox-group, .radio-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .checkbox-item, .radio-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .tour-card {
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
            background: white;
        }
        .tour-card:hover {
            box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }
        .tour-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
        .price-tag {
            background: linear-gradient(45deg, #10b981, #059669);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 14px;
        }
        .filter-button {
            background-color: #3E3E3E;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: opacity 0.3s ease;
        }
        .filter-button:hover {
            opacity: 0.9;
        }
        .reset-button {
            background: transparent;
            color: #6b7280;
            border: 1px solid #d1d5db;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        .reset-button:hover {
            background: #f9fafb;
            border-color: #9ca3af;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="max-w-7xl mx-auto px-6 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
            <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å - –§–∏–ª—å—Ç—Ä—ã -->
            <div class="lg:col-span-1">
                <div class="sticky top-8">
                    <h2 class="text-xl font-semibold text-gray-900 mb-6" data-translate="filters.title">–§–∏–ª—å—Ç—Ä—ã –ø–æ–∏—Å–∫–∞</h2>
                    
                    <!-- –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ -->
                    <div class="filter-section">
                        <div class="filter-title" data-translate="filters.destination">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="form.country">–°—Ç—Ä–∞–Ω–∞</label>
                            <select id="countrySelect" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="" data-translate="form.select_country">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É</option>
                                <option value="–¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω" data-translate="country.tajikistan">–¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω</option>
                                <option value="–£–∑–±–µ–∫–∏—Å—Ç–∞–Ω" data-translate="country.uzbekistan">–£–∑–±–µ–∫–∏—Å—Ç–∞–Ω</option>
                                <option value="–ö–∏—Ä–≥–∏–∑—Å—Ç–∞–Ω" data-translate="country.kyrgyzstan">–ö–∏—Ä–≥–∏–∑—Å—Ç–∞–Ω</option>
                                <option value="–¢—É—Ä–∫–º–µ–Ω–∏—Å—Ç–∞–Ω" data-translate="country.turkmenistan">–¢—É—Ä–∫–º–µ–Ω–∏—Å—Ç–∞–Ω</option>
                                <option value="–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω" data-translate="country.kazakhstan">–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="form.city">–ì–æ—Ä–æ–¥</label>
                            <select id="citySelect" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" disabled>
                                <option value="" data-translate="form.select_country_first">–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É</option>
                            </select>
                        </div>
                    </div>

                    <!-- –§–æ—Ä–º–∞—Ç —Ç—É—Ä–∞ -->
                    <div class="filter-section">
                        <div class="filter-title" data-translate="filters.format">–§–æ—Ä–º–∞—Ç —Ç—É—Ä–∞</div>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="format-group" name="format" value="–ì—Ä—É–ø–ø–æ–≤–æ–π">
                                <label for="format-group" data-translate="filters.group">–ì—Ä—É–ø–ø–æ–≤–æ–π</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="format-individual" name="format" value="–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π">
                                <label for="format-individual" data-translate="filters.individual">–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="format-vip" name="format" value="VIP">
                                <label for="format-vip">VIP</label>
                            </div>
                        </div>
                    </div>

                    <!-- –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç—É—Ä–∞ -->
                    <div class="filter-section">
                        <div class="filter-title" data-translate="filters.duration">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç—É—Ä–∞</div>
                        <div class="radio-group">
                            <div class="radio-item">
                                <input type="radio" id="duration-1" name="duration" value="1">
                                <label for="duration-1" data-translate="duration.single_day">–û–¥–Ω–æ–¥–Ω–µ–≤–Ω—ã–π</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="duration-2-5" name="duration" value="2-5">
                                <label for="duration-2-5" data-translate="duration.multi_day">–ú–Ω–æ–≥–æ–¥–Ω–µ–≤–Ω—ã–π (2-5 –¥–Ω–µ–π)</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="duration-6+" name="duration" value="6+">
                                <label for="duration-6+" data-translate="duration.long_term">–î–ª–∏—Ç–µ–ª—å–Ω—ã–π (6+ –¥–Ω–µ–π)</label>
                            </div>
                        </div>
                    </div>

                    <!-- –¢–µ–º–∞—Ç–∏–∫–∞ —Ç—É—Ä–∞ -->
                    <div class="filter-section">
                        <div class="filter-title" data-translate="filters.theme">–¢–µ–º–∞—Ç–∏–∫–∞ —Ç—É—Ä–∞</div>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="theme-overview" name="theme" value="–û–±–∑–æ—Ä–Ω–∞—è —ç–∫—Å–∫—É—Ä—Å–∏—è">
                                <label for="theme-overview" data-translate="theme.overview">–û–±–∑–æ—Ä–Ω–∞—è —ç–∫—Å–∫—É—Ä—Å–∏—è</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="theme-trekking" name="theme" value="–ü–æ—Ö–æ–¥—ã / —Ç—Ä–µ–∫–∫–∏–Ω–≥">
                                <label for="theme-trekking" data-translate="theme.trekking">–ü–æ—Ö–æ–¥—ã / —Ç—Ä–µ–∫–∫–∏–Ω–≥</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="theme-mountain" name="theme" value="–ì–æ—Ä–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã">
                                <label for="theme-mountain" data-translate="theme.mountain">–ì–æ—Ä–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="theme-lake" name="theme" value="–û–∑—ë—Ä–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã">
                                <label for="theme-lake" data-translate="theme.lake">–û–∑—ë—Ä–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="theme-historical" name="theme" value="–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π —Ç—É—Ä">
                                <label for="theme-historical" data-translate="theme.historical">–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π —Ç—É—Ä</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="theme-recreational" name="theme" value="–†–µ–∫—Ä–µ–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç—É—Ä">
                                <label for="theme-recreational" data-translate="theme.recreational">–†–µ–∫—Ä–µ–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç—É—Ä</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="theme-agro" name="theme" value="–ê–≥—Ä–æ-—Ç—É—Ä–∏–∑–º">
                                <label for="theme-agro" data-translate="theme.agro">–ê–≥—Ä–æ-—Ç—É—Ä–∏–∑–º</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="theme-health" name="theme" value="–°–∞–Ω–∞—Ç–æ—Ä–Ω–æ-–æ–∑–¥–æ—Ä–æ–≤–∏—Ç–µ–ª—å–Ω—ã–π —Ç—É—Ä">
                                <label for="theme-health" data-translate="theme.health">–°–∞–Ω–∞—Ç–æ—Ä–Ω–æ-–æ–∑–¥–æ—Ä–æ–≤–∏—Ç–µ–ª—å–Ω—ã–π —Ç—É—Ä</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="theme-combined" name="theme" value="–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç—É—Ä –ø–æ –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–π –ê–∑–∏–∏">
                                <label for="theme-combined" data-translate="theme.combined">–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç—É—Ä –ø–æ –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–π –ê–∑–∏–∏</label>
                            </div>
                        </div>
                    </div>

                    <!-- –î–∞—Ç–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è -->
                    <div class="filter-section">
                        <div class="filter-title" data-translate="filters.date_period">–î–∞—Ç–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è</div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="form.date_from">–û—Ç</label>
                            <input type="date" id="dateFrom" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2" data-translate="form.date_to">–î–æ</label>
                            <input type="date" id="dateTo" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                    </div>

                    <!-- –ö–Ω–æ–ø–∫–∏ -->
                    <div class="space-y-3">
                        <button onclick="applyFilters()" class="filter-button w-full" data-translate="btn.apply_filters">–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</button>
                        <button onclick="resetFilters()" class="reset-button w-full" data-translate="btn.reset_filters">–°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã</button>
                    </div>
                </div>
            </div>

            <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
            <div class="lg:col-span-3">
                <div class="mb-6">
                    <h3 class="text-lg font-semibold text-gray-900" data-translate="title.search_results">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞</h3>
                    <p id="resultsCount" class="text-gray-600"><span data-translate="tours.results_count">–ü–æ–∫–∞–∑–∞–Ω–æ —Ç—É—Ä–æ–≤:</span> <span id="tourCount">0</span></p>
                </div>

                <div id="tourResults" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                    <!-- –¢—É—Ä—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∑–¥–µ—Å—å -->
                </div>

                <div id="noResults" class="text-center py-12 hidden">
                    <div class="text-gray-400 text-6xl mb-4">üîç</div>
                    <h3 class="text-xl font-medium text-gray-900 mb-2" data-translate="common.no_tours_found">–¢—É—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                    <p class="text-gray-600" data-translate="common.try_different_search">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Tour Detail Modal with Tabs -->
    <div id="tourDetailModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
        <div class="flex items-center justify-center min-h-screen px-4 py-8">
            <div class="bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-screen overflow-y-auto">
                <!-- Modal Header -->
                <div class="sticky top-0 bg-white border-b border-gray-200 p-6 flex justify-between items-center">
                    <h2 id="modalTitle" class="text-2xl font-bold text-gray-900" data-translate="tours.tour_details">–î–µ—Ç–∞–ª–∏ —Ç—É—Ä–∞</h2>
                    <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                
                <!-- Tabs Navigation -->
                <div class="border-b border-gray-200">
                    <nav class="flex space-x-8 px-6 pt-4" aria-label="Tabs">
                        <button id="modal-tab-description" class="whitespace-nowrap py-2 px-1 border-b-2 border-blue-500 font-medium text-sm text-blue-600" onclick="switchModalTab('description')">
                            –û–ø–∏—Å–∞–Ω–∏–µ —Ç—É—Ä–∞
                        </button>
                        <button id="modal-tab-program" class="whitespace-nowrap py-2 px-1 border-b-2 border-transparent font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300" onclick="switchModalTab('program')">
                            –ü—Ä–æ–≥—Ä–∞–º–º–∞ —Ç—É—Ä–∞
                        </button>
                        <button id="modal-tab-hotels" class="whitespace-nowrap py-2 px-1 border-b-2 border-transparent font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300" onclick="switchModalTab('hotels')">
                            –û—Ç–µ–ª–∏
                        </button>
                    </nav>
                </div>

                <!-- Tabs Content -->
                <div class="p-6">
                    <!-- Description Tab -->
                    <div id="modal-content-description" class="modal-tab-content">
                        <div id="modalDescription" class="text-gray-700 space-y-4 mb-6">
                            <p>–û–ø–∏—Å–∞–Ω–∏–µ —Ç—É—Ä–∞ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–æ...</p>
                        </div>
                        
                        <h4 class="text-lg font-semibold mb-3 text-gray-900">–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ç—É—Ä–∞:</h4>
                        <ul id="modalHighlights" class="space-y-2">
                            <li class="flex items-start">
                                <span class="text-green-600 mr-3">‚úì</span>
                                <span class="text-gray-700">–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–∞</span>
                            </li>
                        </ul>
                    </div>

                    <!-- Program Tab -->
                    <div id="modal-content-program" class="modal-tab-content hidden">
                        <div id="modalProgram" class="space-y-6">
                            <div class="flex items-start space-x-4">
                                <div class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium">08:00</div>
                                <div>
                                    <h4 class="font-semibold text-gray-900">–í—Å—Ç—Ä–µ—á–∞ —Å –≥–∏–¥–æ–º</h4>
                                    <p class="text-gray-600 mt-1">–°–±–æ—Ä –≥—Ä—É–ø–ø—ã –∏ –Ω–∞—á–∞–ª–æ —Ç—É—Ä–∞.</p>
                                </div>
                            </div>
                            
                            <div class="flex items-start space-x-4">
                                <div class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium">10:00</div>
                                <div>
                                    <h4 class="font-semibold text-gray-900">–û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞</h4>
                                    <p class="text-gray-600 mt-1">–ü–æ—Å–µ—â–µ–Ω–∏–µ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π.</p>
                                </div>
                            </div>
                            
                            <div class="flex items-start space-x-4">
                                <div class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium">17:00</div>
                                <div>
                                    <h4 class="font-semibold text-gray-900">–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ</h4>
                                    <p class="text-gray-600 mt-1">–í–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –≤ –æ—Ç–µ–ª—å.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Hotels Tab -->
                    <div id="modal-content-hotels" class="modal-tab-content hidden">
                        <div class="space-y-6">
                            <p class="text-gray-600 mb-6">–û—Ç–µ–ª–∏ –≤–∫–ª—é—á–µ–Ω–Ω—ã–µ –≤ —Å—Ç–æ–∏–º–æ—Å—Ç—å —Ç—É—Ä–∞:</p>
                            
                            <div class="border border-gray-200 rounded-lg overflow-hidden">
                                <div class="flex">
                                    <div class="w-48 h-32 bg-gray-200 flex-shrink-0 flex items-center justify-center">
                                        <span class="text-gray-500">–û—Ç–µ–ª—å</span>
                                    </div>
                                    <div class="p-4 flex-1">
                                        <h4 class="font-semibold text-gray-900">–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –æ—Ç–µ–ª—å</h4>
                                        <div class="flex items-center mt-1">
                                            <div class="flex text-yellow-400">‚òÖ‚òÖ‚òÖ‚òÖ</div>
                                            <span class="ml-2 text-sm text-gray-600">4.2/5</span>
                                        </div>
                                        <p class="text-sm text-gray-600 mt-1">–ö–æ–º—Ñ–æ—Ä—Ç–∞–±–µ–ª—å–Ω–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ</p>
                                        <div class="mt-4 space-y-1 text-sm text-gray-600">
                                            <div class="flex items-center">
                                                <span class="w-4 h-4 mr-2 text-green-600">‚úì</span>
                                                –ó–∞–≤—Ç—Ä–∞–∫ –≤–∫–ª—é—á–µ–Ω
                                            </div>
                                            <div class="flex items-center">
                                                <span class="w-4 h-4 mr-2 text-green-600">‚úì</span>
                                                Wi-Fi
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Modal Footer -->
                <div class="sticky bottom-0 bg-gray-50 px-6 py-4 border-t border-gray-200">
                    <div class="flex justify-between items-center">
                        <div class="text-2xl font-bold text-gray-900">
                            –æ—Ç <span id="modalPrice">$0</span>
                        </div>
                        <button class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                            –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ –≥–æ—Ä–æ–¥–æ–≤ –ø–æ —Å—Ç—Ä–∞–Ω–∞–º - –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏–∑ API
        let citiesByCountry = {};
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω –∏ –≥–æ—Ä–æ–¥–æ–≤ –∏–∑ API
        async function loadCountriesAndCities() {
            try {
                // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç—Ä–∞–Ω—ã
                const countriesResponse = await fetch('/api/countries');
                const countriesResult = await countriesResponse.json();
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –≥–æ—Ä–æ–¥–∞
                const citiesResponse = await fetch('/api/cities');
                const citiesResult = await citiesResponse.json();
                
                if (countriesResult.success && citiesResult.success) {
                    const countriesData = countriesResult.data;
                    const citiesData = citiesResult.data;
                    
                    // –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –≥–æ—Ä–æ–¥–∞ –ø–æ —Å—Ç—Ä–∞–Ω–∞–º
                    citiesByCountry = {};
                    countriesData.forEach(country => {
                        const countryName = country.nameRu;
                        const countryCities = citiesData.filter(city => 
                            city.countryId === country.id
                        ).map(city => city.nameRu);
                        citiesByCountry[countryName] = countryCities;
                    });
                    
                }
            } catch (error) {
                console.error('‚ùå Error loading countries and cities:', error);
                // Fallback –∫ —Å—Ç–∞—Ä—ã–º –¥–∞–Ω–Ω—ã–º
                citiesByCountry = {
                    "–¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω": ["–î—É—à–∞–Ω–±–µ", "–•–æ—Ä–æ–≥", "–•—É–¥–∂–∞–Ω–¥"],
                    "–£–∑–±–µ–∫–∏—Å—Ç–∞–Ω": ["–¢–∞—à–∫–µ–Ω—Ç", "–°–∞–º–∞—Ä–∫–∞–Ω–¥", "–ë—É—Ö–∞—Ä–∞"],
                    "–ö—ã—Ä–≥—ã–∑—Å—Ç–∞–Ω": ["–ë–∏—à–∫–µ–∫"],
                    "–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω": ["–ê—Å—Ç–∞–Ω–∞", "–ê–ª–º–∞—Ç—ã"],
                    "–¢—É—Ä–∫–º–µ–Ω–∏—Å—Ç–∞–Ω": ["–ê—à—Ö–∞–±–∞–¥"]
                };
            }
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω—ã
        document.getElementById('countrySelect').addEventListener('change', function() {
            const countrySelect = this;
            const citySelect = document.getElementById('citySelect');
            const selectedCountry = countrySelect.value;
            
            if (selectedCountry) {
                citySelect.disabled = false;
                citySelect.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥</option>';
                
                const cities = citiesByCountry[selectedCountry] || [];
                cities.forEach(city => {
                    const option = document.createElement('option');
                    option.value = city;
                    option.textContent = city;
                    citySelect.appendChild(option);
                });
            } else {
                citySelect.disabled = true;
                citySelect.innerHTML = '<option value="">–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É</option>';
            }
        });

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Ç—É—Ä–æ–≤ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', async function() {
            // –°–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç—Ä–∞–Ω—ã –∏ –≥–æ—Ä–æ–¥–∞
            await loadCountriesAndCities();
            
            // –ó–∞—Ç–µ–º –∑–∞–≥—Ä—É–∂–∞–µ–º —Ç—É—Ä—ã
            loadTours();
        });

        // –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ç—É—Ä–æ–≤
        async function loadTours(filters = {}) {
            try {
                const queryParams = new URLSearchParams();
                
                // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞
                Object.entries(filters).forEach(([key, value]) => {
                    if (Array.isArray(value) && value.length > 0) {
                        queryParams.append(key, value.join(','));
                    } else if (value && !Array.isArray(value)) {
                        queryParams.append(key, value);
                    }
                });

                const response = await fetch(`${window.location.origin}/api/tours/search?${queryParams}`);
                const tours = await response.json();
                
                displayTours(tours);
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç—É—Ä–æ–≤:', error);
                showNoResults();
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç—É—Ä–æ–≤
        function displayTours(tours) {
            const tourResults = document.getElementById('tourResults');
            const noResults = document.getElementById('noResults');
            const tourCount = document.getElementById('tourCount');
            
            if (tours.length === 0) {
                showNoResults();
                return;
            }
            
            noResults.classList.add('hidden');
            tourResults.classList.remove('hidden');
            tourCount.textContent = tours.length;
            
            tourResults.innerHTML = tours.map(tour => `
                <div class="tour-card">
                    <div class="relative">
                        <img src="https://via.placeholder.com/300x200/4F46E5/ffffff?text=${encodeURIComponent(tour.title)}" 
                             alt="${tour.title}" class="tour-image">
                        <div class="absolute top-3 right-3">
                            <span class="price-tag">–æ—Ç $${tour.price}</span>
                        </div>
                    </div>
                    <div class="p-4">
                        <h3 class="font-semibold text-lg text-gray-900 mb-2 line-clamp-2">${tour.title}</h3>
                        <p class="text-gray-600 text-sm mb-3 line-clamp-2">${tour.description}</p>
                        <div class="space-y-2 mb-4">
                            <div class="flex items-center text-sm text-gray-500">
                                <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"/>
                                </svg>
                                ${tour.city}, ${tour.country}
                            </div>
                            <div class="flex items-center text-sm text-gray-500">
                                <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"/>
                                </svg>
                                ${tour.durationDays} ${getDayWord(tour.durationDays)}
                            </div>
                            <div class="flex items-center text-sm text-gray-500">
                                <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z" clip-rule="evenodd"/>
                                </svg>
                                ${tour.format}
                            </div>
                        </div>
                        <button onclick="openTourDetail('${tour.id}')" class="w-full text-white font-medium py-2 px-4 rounded-md transition-opacity hover:opacity-90" 
                                style="background-color: #3E3E3E;">
                            –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        function showNoResults() {
            const tourResults = document.getElementById('tourResults');
            const noResults = document.getElementById('noResults');
            const tourCount = document.getElementById('tourCount');
            
            tourResults.classList.add('hidden');
            noResults.classList.remove('hidden');
            tourCount.textContent = '0';
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–∫–ª–æ–Ω–µ–Ω–∏—è —Å–ª–æ–≤–∞ "–¥–µ–Ω—å"
        function getDayWord(count) {
            if (count === 1) return '–¥–µ–Ω—å';
            if (count >= 2 && count <= 4) return '–¥–Ω—è';
            return '–¥–Ω–µ–π';
        }

        // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
        function applyFilters() {
            const filters = {};
            
            // –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
            const country = document.getElementById('countrySelect').value;
            const city = document.getElementById('citySelect').value;
            if (country) filters.country = country;
            if (city) filters.city = city;
            
            // –§–æ—Ä–º–∞—Ç —Ç—É—Ä–∞
            const formats = Array.from(document.querySelectorAll('input[name="format"]:checked'))
                .map(cb => cb.value);
            if (formats.length > 0) filters.format = formats;
            
            // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
            const duration = document.querySelector('input[name="duration"]:checked');
            if (duration) filters.duration = duration.value;
            
            // –¢–µ–º–∞—Ç–∏–∫–∞
            const themes = Array.from(document.querySelectorAll('input[name="theme"]:checked'))
                .map(cb => cb.value);
            if (themes.length > 0) filters.theme = themes;
            
            // –î–∞—Ç—ã
            const dateFrom = document.getElementById('dateFrom').value;
            const dateTo = document.getElementById('dateTo').value;
            if (dateFrom) filters.dateFrom = dateFrom;
            if (dateTo) filters.dateTo = dateTo;
            
            loadTours(filters);
        }

        // –°–±—Ä–æ—Å —Ñ–∏–ª—å—Ç—Ä–æ–≤
        function resetFilters() {
            // –°–±—Ä–æ—Å select'–æ–≤
            document.getElementById('countrySelect').value = '';
            document.getElementById('citySelect').value = '';
            document.getElementById('citySelect').disabled = true;
            document.getElementById('citySelect').innerHTML = '<option value="">–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É</option>';
            
            // –°–±—Ä–æ—Å —á–µ–∫–±–æ–∫—Å–æ–≤
            document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
            
            // –°–±—Ä–æ—Å —Ä–∞–¥–∏–æ –∫–Ω–æ–ø–æ–∫
            document.querySelectorAll('input[type="radio"]').forEach(rb => rb.checked = false);
            
            // –°–±—Ä–æ—Å –¥–∞—Ç
            document.getElementById('dateFrom').value = '';
            document.getElementById('dateTo').value = '';
            
            // –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö —Ç—É—Ä–æ–≤
            loadTours();
        }

        // –§—É–Ω–∫—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç—É—Ä–∞ —Å —Ç–∞–±–∞–º–∏
        function openTourDetail(tourId) {
            const modal = document.getElementById('tourDetailModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalDescription = document.getElementById('modalDescription');
            const modalPrice = document.getElementById('modalPrice');
            
            // –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ç—É—Ä–∞
            const tourData = {
                title: `–¢—É—Ä #${tourId}`,
                description: '–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —ç—Ç–æ–≥–æ —É–¥–∏–≤–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ç—É—Ä–∞ —Å –ø–æ—Å–µ—â–µ–Ω–∏–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –º–µ—Å—Ç –∏ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ–º —Å –º–µ—Å—Ç–Ω–æ–π –∫—É–ª—å—Ç—É—Ä–æ–π.',
                price: Math.floor(Math.random() * 500) + 100
            };
            
            // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            modalTitle.textContent = tourData.title;
            modalDescription.innerHTML = `<p>${tourData.description}</p>`;
            modalPrice.textContent = `$${tourData.price}`;
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            modal.classList.remove('hidden');
            
            // –°–±—Ä–æ—Å–∏—Ç—å –≤–∫–ª–∞–¥–∫–∏ –∫ –ø–µ—Ä–≤–æ–π
            switchModalTab('description');
        }

        // –§—É–Ω–∫—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
        function closeModal() {
            const modal = document.getElementById('tourDetailModal');
            modal.classList.add('hidden');
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∫–ª–∞–¥–æ–∫ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
        function switchModalTab(tabName) {
            // –°–∫—Ä—ã—Ç—å –≤—Å–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–∫–ª–∞–¥–æ–∫
            document.querySelectorAll('.modal-tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // –£–¥–∞–ª–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ —Å–æ –≤—Å–µ—Ö –≤–∫–ª–∞–¥–æ–∫
            document.querySelectorAll('[id^="modal-tab-"]').forEach(tab => {
                tab.classList.remove('border-blue-500', 'text-blue-600');
                tab.classList.add('border-transparent', 'text-gray-500');
            });
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
            const contentElement = document.getElementById(`modal-content-${tabName}`);
            if (contentElement) {
                contentElement.classList.remove('hidden');
            }
            
            // –î–æ–±–∞–≤–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≤–∫–ª–∞–¥–∫–µ
            const tabElement = document.getElementById(`modal-tab-${tabName}`);
            if (tabElement) {
                tabElement.classList.remove('border-transparent', 'text-gray-500');
                tabElement.classList.add('border-blue-500', 'text-blue-600');
            }
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –µ–≥–æ
        document.getElementById('tourDetailModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        // Hotel availability checker functions
        function checkHotelAvailability() {
            const modal = document.getElementById('hotelAvailabilityModal');
            if (modal) {
                modal.style.display = 'flex';
                // Set minimum check-in date to today
                const today = new Date().toISOString().split('T')[0];
                document.getElementById('checkInDate').min = today;
                document.getElementById('checkOutDate').min = today;
            }
        }

        function closeHotelModal() {
            const modal = document.getElementById('hotelAvailabilityModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }

        function performHotelSearch() {
            const checkIn = document.getElementById('checkInDate').value;
            const checkOut = document.getElementById('checkOutDate').value;
            const guests = document.getElementById('guestCount').value;
            
            if (!checkIn || !checkOut) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—ã –∑–∞–µ–∑–¥–∞ –∏ –≤—ã–µ–∑–¥–∞');
                return;
            }
            
            if (new Date(checkIn) >= new Date(checkOut)) {
                alert('–î–∞—Ç–∞ –≤—ã–µ–∑–¥–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–∑–∂–µ –¥–∞—Ç—ã –∑–∞–µ–∑–¥–∞');
                return;
            }
            
            // Hide search form and show results
            document.getElementById('hotelSearchForm').style.display = 'none';
            document.getElementById('hotelResults').style.display = 'block';
            
            // Show search parameters
            document.getElementById('searchParams').innerHTML = `
                <div class="text-sm text-gray-600 mb-4">
                    <strong>–ü–æ–∏—Å–∫:</strong> ${checkIn} - ${checkOut}, ${guests} ${getGuestWord(guests)}
                </div>
            `;
            
            // Display hotel cards
            displayHotelCards();
        }

        function getGuestWord(count) {
            const num = parseInt(count);
            if (num === 1) return '–≥–æ—Å—Ç—å';
            if (num >= 2 && num <= 4) return '–≥–æ—Å—Ç—è';
            return '–≥–æ—Å—Ç–µ–π';
        }

        function displayHotelCards() {
            const hotelData = [
                {
                    id: 1,
                    name: "–ì—Ä–∞–Ω–¥ –û—Ç–µ–ª—å –î—É—à–∞–Ω–±–µ",
                    stars: 5,
                    price: 8500,
                    description: "–†–æ—Å–∫–æ—à–Ω—ã–π –æ—Ç–µ–ª—å –≤ —Ü–µ–Ω—Ç—Ä–µ —Å—Ç–æ–ª–∏—Ü—ã —Å –≤–∏–¥–æ–º –Ω–∞ –≥–æ—Ä—ã –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —É–¥–æ–±—Å—Ç–≤–∞–º–∏",
                    image: "https://via.placeholder.com/300x200/4F46E5/ffffff?text=–ì—Ä–∞–Ω–¥+–û—Ç–µ–ª—å"
                },
                {
                    id: 2,
                    name: "–ì–æ—Å—Ç–∏–Ω–∏—Ü–∞ –¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω",
                    stars: 4,
                    price: 5200,
                    description: "–ö–æ–º—Ñ–æ—Ä—Ç–∞–±–µ–ª—å–Ω—ã–π –æ—Ç–µ–ª—å —Å —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–º –¥–∏–∑–∞–π–Ω–æ–º –∏ –æ—Ç–ª–∏—á–Ω—ã–º —Å–µ—Ä–≤–∏—Å–æ–º",
                    image: "https://via.placeholder.com/300x200/059669/ffffff?text=–¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω"
                },
                {
                    id: 3,
                    name: "–ü–∞–º–∏—Ä –ü–∞–ª–∞—Å",
                    stars: 4,
                    price: 6800,
                    description: "–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –æ—Ç–µ–ª—å —Å spa-—Ü–µ–Ω—Ç—Ä–æ–º –∏ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞–º–∏ –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –∫—É—Ö–Ω–∏",
                    image: "https://via.placeholder.com/300x200/DC2626/ffffff?text=–ü–∞–º–∏—Ä+–ü–∞–ª–∞—Å"
                },
                {
                    id: 4,
                    name: "–ë–∏–∑–Ω–µ—Å –û—Ç–µ–ª—å –û—Ä–∑—É",
                    stars: 3,
                    price: 3500,
                    description: "–£—é—Ç–Ω—ã–π –æ—Ç–µ–ª—å –¥–ª—è –¥–µ–ª–æ–≤—ã—Ö –ø–æ–µ–∑–¥–æ–∫ —Å –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü-–∑–∞–ª–æ–º –∏ Wi-Fi",
                    image: "https://via.placeholder.com/300x200/7C3AED/ffffff?text=–û—Ä–∑—É"
                },
                {
                    id: 5,
                    name: "–ì–æ—Å—Ç–µ–≤–æ–π –¥–æ–º –í–æ—Å—Ç–æ–∫",
                    stars: 3,
                    price: 2800,
                    description: "–°–µ–º–µ–π–Ω—ã–π –≥–æ—Å—Ç–µ–≤–æ–π –¥–æ–º —Å –¥–æ–º–∞—à–Ω–µ–π –∞—Ç–º–æ—Å—Ñ–µ—Ä–æ–π –∏ –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –∫—É—Ö–Ω–µ–π",
                    image: "https://via.placeholder.com/300x200/EA580C/ffffff?text=–í–æ—Å—Ç–æ–∫"
                }
            ];

            const hotelContainer = document.getElementById('hotelCards');
            hotelContainer.innerHTML = hotelData.map(hotel => `
                <div class="border rounded-lg overflow-hidden hover:shadow-lg transition-shadow">
                    <img src="${hotel.image}" alt="${hotel.name}" class="w-full h-48 object-cover">
                    <div class="p-4">
                        <div class="flex justify-between items-start mb-2">
                            <h4 class="font-semibold text-lg">${hotel.name}</h4>
                            <div class="flex items-center">
                                ${generateStars(hotel.stars)}
                            </div>
                        </div>
                        <p class="text-gray-600 text-sm mb-3">${hotel.description}</p>
                        <div class="flex justify-between items-center">
                            <div>
                                <span class="text-2xl font-bold text-green-600">–æ—Ç ${hotel.price.toLocaleString()}‚ÇΩ</span>
                                <div class="text-xs text-gray-500">–∑–∞ –Ω–æ—á—å</div>
                            </div>
                            <button onclick="selectHotel(${hotel.id}, '${hotel.name}', ${hotel.price})" 
                                    class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors">
                                –í—ã–±—Ä–∞—Ç—å
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function generateStars(count) {
            let stars = '';
            for (let i = 0; i < 5; i++) {
                if (i < count) {
                    stars += '<svg class="w-4 h-4 text-yellow-400 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/></svg>';
                } else {
                    stars += '<svg class="w-4 h-4 text-gray-300 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/></svg>';
                }
            }
            return stars;
        }

        function selectHotel(hotelId, hotelName, price) {
            // Store selected hotel and redirect to booking flow
            const currentTourId = window.currentSelectedTourId || 1;
            localStorage.setItem('selectedHotel', JSON.stringify({ id: hotelId, name: hotelName, price: price }));
            window.location.href = `tour-template.html?id=${currentTourId}`;
        }

        function backToSearch() {
            document.getElementById('hotelSearchForm').style.display = 'block';
            document.getElementById('hotelResults').style.display = 'none';
        }

        // Add hotel checker button when document loads
        document.addEventListener('DOMContentLoaded', function() {
            // Add hotel checker button after the search button
            const searchButton = document.querySelector('.filter-button');
            if (searchButton) {
                const hotelButton = document.createElement('button');
                hotelButton.type = 'button';
                hotelButton.onclick = checkHotelAvailability;
                hotelButton.className = 'w-full bg-green-600 text-white font-medium py-2 px-4 rounded-md transition-colors hover:bg-green-700 mt-4';
                hotelButton.textContent = '–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –æ—Ç–µ–ª–µ–π';
                searchButton.parentNode.appendChild(hotelButton);
            }
        });
    </script>

    <!-- Hotel Availability Modal -->
    <div id="hotelAvailabilityModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden items-center justify-center">
        <div class="bg-white rounded-lg max-w-4xl w-full mx-4 p-6 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-semibold">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –æ—Ç–µ–ª–µ–π</h3>
                <button onclick="closeHotelModal()" class="text-gray-400 hover:text-gray-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Search Form -->
            <div id="hotelSearchForm">
                <form onsubmit="event.preventDefault(); performHotelSearch();">
                    <div class="space-y-4">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label for="checkInDate" class="block text-sm font-medium text-gray-700 mb-1">–ó–∞–µ–∑–¥</label>
                                <input type="date" id="checkInDate" class="w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                            </div>
                            <div>
                                <label for="checkOutDate" class="block text-sm font-medium text-gray-700 mb-1">–í—ã–µ–∑–¥</label>
                                <input type="date" id="checkOutDate" class="w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                            </div>
                        </div>
                        
                        <div>
                            <label for="guestCount" class="block text-sm font-medium text-gray-700 mb-1">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Å—Ç–µ–π</label>
                            <select id="guestCount" class="w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="1">1 –≥–æ—Å—Ç—å</option>
                                <option value="2">2 –≥–æ—Å—Ç—è</option>
                                <option value="3">3 –≥–æ—Å—Ç—è</option>
                                <option value="4">4 –≥–æ—Å—Ç—è</option>
                                <option value="5">5+ –≥–æ—Å—Ç–µ–π</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="flex gap-3 mt-6">
                        <button type="button" onclick="closeHotelModal()" class="flex-1 py-2 px-4 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50">
                            –û—Ç–º–µ–Ω–∞
                        </button>
                        <button type="submit" class="flex-1 py-2 px-4 bg-green-600 text-white rounded-md hover:bg-green-700">
                            –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ
                        </button>
                    </div>
                </form>
            </div>

            <!-- Hotel Results -->
            <div id="hotelResults" style="display: none;">
                <div class="flex justify-between items-center mb-4">
                    <div id="searchParams"></div>
                    <button onclick="backToSearch()" class="text-blue-600 hover:text-blue-800 text-sm">
                        ‚Üê –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ–∏—Å–∫
                    </button>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="hotelCards">
                    <!-- Hotel cards will be inserted here -->
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Language dropdown functions
        function toggleLanguageDropdown() {
            const dropdown = document.getElementById('langDropdown');
            dropdown.classList.toggle('show');
        }

        function selectLanguage(lang, flagClass, langName) {
            const selectedFlag = document.querySelector('.selected-flag');
            const selectedLang = document.querySelector('.selected-lang');
            
            selectedFlag.className = 'selected-flag ' + flagClass;
            selectedLang.textContent = langName;
            
            // Close dropdown
            document.getElementById('langDropdown').classList.remove('show');
        }

        // Currency dropdown functions
        function toggleCurrencyDropdown() {
            const dropdown = document.getElementById('currencyDropdown');
            dropdown.classList.toggle('show');
        }

        function selectCurrency(currency, symbol) {
            const selectedCurrency = document.querySelector('.selected-currency');
            const currencySymbol = document.querySelector('.currency-symbol');
            
            selectedCurrency.textContent = currency;
            currencySymbol.textContent = symbol;
            
            // Close dropdown
            document.getElementById('currencyDropdown').classList.remove('show');
        }

        // Close dropdowns when clicking outside
        document.addEventListener('click', function(event) {
            if (!event.target.closest('.language-dropdown')) {
                document.querySelectorAll('.lang-dropdown-content').forEach(dropdown => {
                    dropdown.classList.remove('show');
                });
            }
        });
    </script>
    <!-- üåê –î–ò–ù–ê–ú–ò–ß–ï–°–ö–ò–ô –§–£–¢–ï–† -->
    <div id="footer-container"></div>
</body>
</html>